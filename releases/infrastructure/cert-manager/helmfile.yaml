repositories:
  - name: jetstack
    url: https://charts.jetstack.io

releases:
  - name: cert-manager
    namespace: "{{ .Values.namespaces.cert_manager }}"
    chart: jetstack/cert-manager
    version: v1.17.1
    values:
      - global:
          leaderElection:
            namespace: cert-manager
        installCRDs: true
        prometheus:
          enabled: false
  - name: cert-manager-issuer
    namespace: "{{ .Values.namespaces.cert_manager }}"
    chart: ../../../charts/cert-manager-issuer
    version: 0.1.0
    needs:
      - cert-manager
    values:
      - ingress:
          namespace: "{{ .Values.namespaces.ingress }}"
      - domain: "{{ .Values.secret.domain }}"
      - cloudflare:
          email: "{{ .Values.secret.cloudflare_email }}"
          api_token: "{{ .Values.secret.cloudflare_api_token }}"
