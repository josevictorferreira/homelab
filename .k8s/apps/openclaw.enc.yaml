apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: e3b108132ada1617c4bfcfca646e1a95d9b318b66c064dfa324f825570c2a676
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - rm -rf /app/extensions/matrix && ln -sf /home/node/.openclaw/extensions/matrix /app/extensions/matrix && exec node dist/index.js gateway run --allow-unconfigured
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "true"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsPolicy: ClusterFirst
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                - command:
                    - sh
                    - -c
                    - |
                      set -e

                      PLUGIN_DIR="/home/node/.openclaw/extensions/matrix"

                      # Check if already installed with all deps (including native binary)
                      if [ -d "$PLUGIN_DIR/node_modules/@vector-im/matrix-bot-sdk" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/markdown-it" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/@matrix-org/matrix-sdk-crypto-nodejs-linux-x64-gnu" ]; then
                        echo "Matrix plugin deps already installed"
                        exit 0
                      fi

                      echo "Setting up matrix plugin in persistent volume..."

                      # Copy plugin source from bundled location (not hidden here - emptyDir only on main)
                      rm -rf "$PLUGIN_DIR"
                      mkdir -p "$PLUGIN_DIR"
                      cp -r /app/extensions/matrix/* "$PLUGIN_DIR/"

                      # Remove devDependencies (workspace ref) from package.json
                      cd "$PLUGIN_DIR"
                      sed -i '/"devDependencies"/,/}/d' package.json
                      # Remove trailing comma before closing brace if any
                      sed -i ':a;N;$!ba;s/,\n}/\n}/g' package.json

                      # Allow native module build scripts (pnpm v10+ blocks them by default)
                      # Without this, @matrix-org/matrix-sdk-crypto-nodejs postinstall won't run
                      # and the platform-specific binary won't be downloaded
                      node -e "
                        const pkg = JSON.parse(require('fs').readFileSync('package.json','utf8'));
                        pkg.pnpm = { onlyBuiltDependencies: ['@matrix-org/matrix-sdk-crypto-nodejs'] };
                        require('fs').writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "

                      echo "Installing dependencies with pnpm..."
                      pnpm install --no-frozen-lockfile 2>&1

                      echo "Matrix plugin installed successfully"
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: install-matrix-plugin
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBkbEwxR2ZKT2xpalpuQkpo
            bkRiZmU1Um5iQ28vSEhET3ZwNXJaVWRmMFVZCklMSEtBbml1dlFwYXN0OXFob1Fp
            cG50Sk96UmZnQ0IzMmZGQk5rRjRFV0kKLS0tIFljSm9WS2RUVkIvOUxDWW1yR0wy
            d1BKZ0FQQys5Y1NEMmk5NWNKRUdwbG8KDvUWo+7Intd3jcEoP/sfyFL/vuPUh98h
            phIcjRemr1eJdTH1KAzcJ4ODSVrRbH+EILKkXyBZgM/tmqvlu0lExQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSc2dhU2g1T3lLNEJJcitl
            SzNHTjhwK1lDWTRZNFZiM0NndjBHREhKbWdjClFWaG9qL2U5dlBHYWJFQjEwbFo4
            NEh3d25uMzVscHRodi9xMEp3OHozUVEKLS0tIExMTS9zUFVGVmtTbnFCZW9WQVdr
            VHpyT3hzNnNyaS9VTzFlcFR0Wk5ZdEkKCXbQwGZzZVsFDOQZ01e41OHpUcRpJzUB
            BnyDDhAro8ud3ygadeUzR6V4nDPjww7ECCEudgllMTQdYntlDjTnpA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBzQWh1UmxQMUlGaitUUGpQ
            dW9nTWpBNVdzUmRhNEZtcTZYc3kzYkYrWGl3CjZKM3A4T3FCWmxBdDJsT2YrWmpN
            NldqcEZ5djF0TVp0cUU2YWp3cGJjc2sKLS0tIElpN0pPRzM0d01zU2hVbjRwVlM4
            c1NUVVppT0JzY2EwYmtQYTFRQzNac0EK8yWIvO0L/kmQmj4JtNrFIoDDyslCya4Y
            dYb7erOgbya2UeM+mgWk2NavHOqx2Ln8qAkV82+NRf/pzjy63UFpcg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T14:04:56Z"
    mac: ENC[AES256_GCM,data:12WGvWpt/vbXzV7T4gZr65N3QtnmsLWwzeNiM6ETqE9FdRbr7MlGq21To6DFlnHGG5U7QkF4zxKS/cozcUmppJtwaOtYLOPG0wMKyTvd1bqw1nNJGfSqzYxIkRYCK696E6YFfyZC+6t4fPXz7+t6ln4UUjX+l+km9lxkyNnSmAw=,iv:krXMCtPXGtfMnLF6xp9W7BnvXVWUMoU9PTaZqsudL7A=,tag:05wWFUTMo8AbFHmKHbhxvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data:kd/7zepw0svKePsFCOB/NqTvFmJqTMQ1BAz9AbjsF6RDMCLISu/TBJsyvf1qh2oBvCT8kmp4AfsTq6uGdXR9l0SUJ4AZ/lpt2lqumdqL/tBqCr/sHaCdzEuhwzdZnQrw3el/sIY98ryBxudhammkkoFczWJYAGWWHaoja4Id54LaaJw+OatoogJ3vwyVBjfuCWPZsFoZlE0nAkHeTVhYORa2JZeWn4IDf20+qwapc3HYAjGxiAVyuDMeZz0ssezfxOxVmx62w/wPftjMfjPbEMPVY5FWX/+qDavXqzDZsOqt2bSuCF12ACJyM5brkyzLpinTii5swsGv5zWCQdp1QQSx77QtXYvd53kNgb3bDlToG1pZBNJ7tzk2p/WpsvaFA20f1BNoy2xcO/cM2sfxGMZxVR/JlKQQe2Yk/Yf5JWe3QAZ3hKRoqOhL6HpN8Ho0uH//JsTXIkNDhImbXCkkqczjpNXzAiTzZw2yABP0Toue1+vLzaZWSHva840xlM3dzWU67uEp6SlKsKSNKRcL/Vyhnt3tqb1VpofNmi5KiaznfiCuCuK10Coe6RlZVpzqX9dOEJJuVyWWIwj5ZrEQoa5AFP1sPIxrdvaisKWop6Uv5odj6N2C62T+LS0miNM+cI6P62de0N/RSc8Aib+95SqM/RL7PcvMUGSmUbcfp1UHCGFieknOluHCGlLeOFP6U0hIa/wu5oknNT7ko49Yd3k8CbHRZLQp0gtiGxFL4sF/g6KijiJnsccOTyvsuzyTY2Va1yhAnmybPVWAIUA95DuQ3iSYUpo/GMiE9bVtsK7X3VekG8kBsfCaRChg4Bw0TmHAdGNp7TJiOQ7yIhykaHog7E/+RywdLozbV8kI7Yy/nVcsGi3aJiFqN4RQGmiPe/l58DCCeernkvlbIAjH2RWwfvYfmmCb26AMeLmgLvKDIaIjaHkH6QO0aDUSNv5uJf59GsEN6g2tCksKznsQWdxvpWbZmI4kDT1S2QhwJmxOjUhD+7BttDdURybqGubrdu97XqGfvexoYjbB2DIzeatDP6MJvvjCtblGrlFYZgjqrLOKP1UMkXhLn4rD7IsKr72HXLdcBe7yp+Ka0TiDaNPqGQ2TxF4PNZDNHrLXH0KLa4Bisllg695EiS/4N7yPf4129E6+5jdSCGYozXvQNJ94gyRv4pMSq+gYjsuKfsnmdH02zD6Mg8QYxxEegyHqbwgOJQiV9GVKSbQWnQpsi+60fovLV8+iQChkPYrJrbYfp5Dl5zitgxbNfMhsgw9o/czAeBmdrY5ca9rqK2PThnXlFyTdkeO74+lex//A21flAFIS5LwaHZLgPlWx5Laei9nPu0YXdrLx4/9sheDyp1Y6OBkS1gRc7n2qnXVK7S//a33g3s73+R+Ofd3mnPPik4YqZ4tM9T6oEtL2HFiTD9fwoj8ht5nlZfhcNLFlR2/MTrQg4fx035I/91WSFrYoQUlON16YtuTwAb85Acfasf6p8vCxr5jkUeoO/jktCTgbhEbHeugjZU+bWRqAXOrWfZM=,iv:8KzPxNd3u5unDTHZsMpReBfVJgA9UhHQ8vevmXhPX1Y=,tag:+CRo2jDjFkGCt3GKKekXcw==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBkbEwxR2ZKT2xpalpuQkpo
            bkRiZmU1Um5iQ28vSEhET3ZwNXJaVWRmMFVZCklMSEtBbml1dlFwYXN0OXFob1Fp
            cG50Sk96UmZnQ0IzMmZGQk5rRjRFV0kKLS0tIFljSm9WS2RUVkIvOUxDWW1yR0wy
            d1BKZ0FQQys5Y1NEMmk5NWNKRUdwbG8KDvUWo+7Intd3jcEoP/sfyFL/vuPUh98h
            phIcjRemr1eJdTH1KAzcJ4ODSVrRbH+EILKkXyBZgM/tmqvlu0lExQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSc2dhU2g1T3lLNEJJcitl
            SzNHTjhwK1lDWTRZNFZiM0NndjBHREhKbWdjClFWaG9qL2U5dlBHYWJFQjEwbFo4
            NEh3d25uMzVscHRodi9xMEp3OHozUVEKLS0tIExMTS9zUFVGVmtTbnFCZW9WQVdr
            VHpyT3hzNnNyaS9VTzFlcFR0Wk5ZdEkKCXbQwGZzZVsFDOQZ01e41OHpUcRpJzUB
            BnyDDhAro8ud3ygadeUzR6V4nDPjww7ECCEudgllMTQdYntlDjTnpA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBzQWh1UmxQMUlGaitUUGpQ
            dW9nTWpBNVdzUmRhNEZtcTZYc3kzYkYrWGl3CjZKM3A4T3FCWmxBdDJsT2YrWmpN
            NldqcEZ5djF0TVp0cUU2YWp3cGJjc2sKLS0tIElpN0pPRzM0d01zU2hVbjRwVlM4
            c1NUVVppT0JzY2EwYmtQYTFRQzNac0EK8yWIvO0L/kmQmj4JtNrFIoDDyslCya4Y
            dYb7erOgbya2UeM+mgWk2NavHOqx2Ln8qAkV82+NRf/pzjy63UFpcg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T14:04:56Z"
    mac: ENC[AES256_GCM,data:12WGvWpt/vbXzV7T4gZr65N3QtnmsLWwzeNiM6ETqE9FdRbr7MlGq21To6DFlnHGG5U7QkF4zxKS/cozcUmppJtwaOtYLOPG0wMKyTvd1bqw1nNJGfSqzYxIkRYCK696E6YFfyZC+6t4fPXz7+t6ln4UUjX+l+km9lxkyNnSmAw=,iv:krXMCtPXGtfMnLF6xp9W7BnvXVWUMoU9PTaZqsudL7A=,tag:05wWFUTMo8AbFHmKHbhxvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBkbEwxR2ZKT2xpalpuQkpo
            bkRiZmU1Um5iQ28vSEhET3ZwNXJaVWRmMFVZCklMSEtBbml1dlFwYXN0OXFob1Fp
            cG50Sk96UmZnQ0IzMmZGQk5rRjRFV0kKLS0tIFljSm9WS2RUVkIvOUxDWW1yR0wy
            d1BKZ0FQQys5Y1NEMmk5NWNKRUdwbG8KDvUWo+7Intd3jcEoP/sfyFL/vuPUh98h
            phIcjRemr1eJdTH1KAzcJ4ODSVrRbH+EILKkXyBZgM/tmqvlu0lExQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSc2dhU2g1T3lLNEJJcitl
            SzNHTjhwK1lDWTRZNFZiM0NndjBHREhKbWdjClFWaG9qL2U5dlBHYWJFQjEwbFo4
            NEh3d25uMzVscHRodi9xMEp3OHozUVEKLS0tIExMTS9zUFVGVmtTbnFCZW9WQVdr
            VHpyT3hzNnNyaS9VTzFlcFR0Wk5ZdEkKCXbQwGZzZVsFDOQZ01e41OHpUcRpJzUB
            BnyDDhAro8ud3ygadeUzR6V4nDPjww7ECCEudgllMTQdYntlDjTnpA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBzQWh1UmxQMUlGaitUUGpQ
            dW9nTWpBNVdzUmRhNEZtcTZYc3kzYkYrWGl3CjZKM3A4T3FCWmxBdDJsT2YrWmpN
            NldqcEZ5djF0TVp0cUU2YWp3cGJjc2sKLS0tIElpN0pPRzM0d01zU2hVbjRwVlM4
            c1NUVVppT0JzY2EwYmtQYTFRQzNac0EK8yWIvO0L/kmQmj4JtNrFIoDDyslCya4Y
            dYb7erOgbya2UeM+mgWk2NavHOqx2Ln8qAkV82+NRf/pzjy63UFpcg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T14:04:56Z"
    mac: ENC[AES256_GCM,data:12WGvWpt/vbXzV7T4gZr65N3QtnmsLWwzeNiM6ETqE9FdRbr7MlGq21To6DFlnHGG5U7QkF4zxKS/cozcUmppJtwaOtYLOPG0wMKyTvd1bqw1nNJGfSqzYxIkRYCK696E6YFfyZC+6t4fPXz7+t6ln4UUjX+l+km9lxkyNnSmAw=,iv:krXMCtPXGtfMnLF6xp9W7BnvXVWUMoU9PTaZqsudL7A=,tag:05wWFUTMo8AbFHmKHbhxvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBkbEwxR2ZKT2xpalpuQkpo
            bkRiZmU1Um5iQ28vSEhET3ZwNXJaVWRmMFVZCklMSEtBbml1dlFwYXN0OXFob1Fp
            cG50Sk96UmZnQ0IzMmZGQk5rRjRFV0kKLS0tIFljSm9WS2RUVkIvOUxDWW1yR0wy
            d1BKZ0FQQys5Y1NEMmk5NWNKRUdwbG8KDvUWo+7Intd3jcEoP/sfyFL/vuPUh98h
            phIcjRemr1eJdTH1KAzcJ4ODSVrRbH+EILKkXyBZgM/tmqvlu0lExQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSc2dhU2g1T3lLNEJJcitl
            SzNHTjhwK1lDWTRZNFZiM0NndjBHREhKbWdjClFWaG9qL2U5dlBHYWJFQjEwbFo4
            NEh3d25uMzVscHRodi9xMEp3OHozUVEKLS0tIExMTS9zUFVGVmtTbnFCZW9WQVdr
            VHpyT3hzNnNyaS9VTzFlcFR0Wk5ZdEkKCXbQwGZzZVsFDOQZ01e41OHpUcRpJzUB
            BnyDDhAro8ud3ygadeUzR6V4nDPjww7ECCEudgllMTQdYntlDjTnpA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBzQWh1UmxQMUlGaitUUGpQ
            dW9nTWpBNVdzUmRhNEZtcTZYc3kzYkYrWGl3CjZKM3A4T3FCWmxBdDJsT2YrWmpN
            NldqcEZ5djF0TVp0cUU2YWp3cGJjc2sKLS0tIElpN0pPRzM0d01zU2hVbjRwVlM4
            c1NUVVppT0JzY2EwYmtQYTFRQzNac0EK8yWIvO0L/kmQmj4JtNrFIoDDyslCya4Y
            dYb7erOgbya2UeM+mgWk2NavHOqx2Ln8qAkV82+NRf/pzjy63UFpcg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T14:04:56Z"
    mac: ENC[AES256_GCM,data:12WGvWpt/vbXzV7T4gZr65N3QtnmsLWwzeNiM6ETqE9FdRbr7MlGq21To6DFlnHGG5U7QkF4zxKS/cozcUmppJtwaOtYLOPG0wMKyTvd1bqw1nNJGfSqzYxIkRYCK696E6YFfyZC+6t4fPXz7+t6ln4UUjX+l+km9lxkyNnSmAw=,iv:krXMCtPXGtfMnLF6xp9W7BnvXVWUMoU9PTaZqsudL7A=,tag:05wWFUTMo8AbFHmKHbhxvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBkbEwxR2ZKT2xpalpuQkpo
            bkRiZmU1Um5iQ28vSEhET3ZwNXJaVWRmMFVZCklMSEtBbml1dlFwYXN0OXFob1Fp
            cG50Sk96UmZnQ0IzMmZGQk5rRjRFV0kKLS0tIFljSm9WS2RUVkIvOUxDWW1yR0wy
            d1BKZ0FQQys5Y1NEMmk5NWNKRUdwbG8KDvUWo+7Intd3jcEoP/sfyFL/vuPUh98h
            phIcjRemr1eJdTH1KAzcJ4ODSVrRbH+EILKkXyBZgM/tmqvlu0lExQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSc2dhU2g1T3lLNEJJcitl
            SzNHTjhwK1lDWTRZNFZiM0NndjBHREhKbWdjClFWaG9qL2U5dlBHYWJFQjEwbFo4
            NEh3d25uMzVscHRodi9xMEp3OHozUVEKLS0tIExMTS9zUFVGVmtTbnFCZW9WQVdr
            VHpyT3hzNnNyaS9VTzFlcFR0Wk5ZdEkKCXbQwGZzZVsFDOQZ01e41OHpUcRpJzUB
            BnyDDhAro8ud3ygadeUzR6V4nDPjww7ECCEudgllMTQdYntlDjTnpA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBzQWh1UmxQMUlGaitUUGpQ
            dW9nTWpBNVdzUmRhNEZtcTZYc3kzYkYrWGl3CjZKM3A4T3FCWmxBdDJsT2YrWmpN
            NldqcEZ5djF0TVp0cUU2YWp3cGJjc2sKLS0tIElpN0pPRzM0d01zU2hVbjRwVlM4
            c1NUVVppT0JzY2EwYmtQYTFRQzNac0EK8yWIvO0L/kmQmj4JtNrFIoDDyslCya4Y
            dYb7erOgbya2UeM+mgWk2NavHOqx2Ln8qAkV82+NRf/pzjy63UFpcg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T14:04:56Z"
    mac: ENC[AES256_GCM,data:12WGvWpt/vbXzV7T4gZr65N3QtnmsLWwzeNiM6ETqE9FdRbr7MlGq21To6DFlnHGG5U7QkF4zxKS/cozcUmppJtwaOtYLOPG0wMKyTvd1bqw1nNJGfSqzYxIkRYCK696E6YFfyZC+6t4fPXz7+t6ln4UUjX+l+km9lxkyNnSmAw=,iv:krXMCtPXGtfMnLF6xp9W7BnvXVWUMoU9PTaZqsudL7A=,tag:05wWFUTMo8AbFHmKHbhxvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
