apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: 073001e9c750bd06c96499b199755e69f6aff1c1e9063a0489df33bfed3c5101
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: GEMINI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: GEMINI_API_KEY
                            name: openclaw-secrets
                    - name: HOME
                      value: /home/node
                    - name: KIMI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: KIMI_API_KEY
                            name: openclaw-secrets
                    - name: MINIMAX_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: MINIMAX_API_KEY
                            name: openclaw-secrets
                    - name: OPENCLAW_MATRIX_TOKEN
                      valueFrom:
                        secretKeyRef:
                            key: OPENCLAW_MATRIX_TOKEN
                            name: openclaw-secrets
                    - name: OPENROUTER_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: OPENROUTER_API_KEY
                            name: openclaw-secrets
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.14@sha256:ace6f32961c4d574cb189d0007ec778408a9c02502f38af9ded6c864bae0f454
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLZ05YNXY1QzkwWnY2Vi81
            T1k5U3pLV3BRMnVoM1pVOVBQRVhIVk4reUY4CitBWUZyU1FIWDdXSVRFL1lYQ3hM
            S09ZcENDT2g1M3BlOVpuNGFzNU9qRVEKLS0tIG9BK1E1OGxoTjBWeWpqQVlrYWd1
            ZU8yMEZrSlNnaE4zdlVlU2NIOUR0YVUKyNzymC2+xJo/DB904ILGsMbksYu+fwet
            j3srCdpgT3vcqbc8QgkOPWt1y6uzdG7SBTVz9aiC7xWHmkzlbX1sBQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWVWlVcFNhV3J3TmdqbjV3
            Q3BvK0lUV1dNdnBDMWxGZ25MaDhZZ3ZzWUQ4CjhuNVlDTHdPYTdBZUJGdVVRem8x
            cytoQ3hxaDhYbmMwR0F5TWFQVTJDbEkKLS0tIFBmNDJsa2I1aGMyN0VqMFZRK21r
            c0ZnWVBqdDh1VnhDbHM5RmlHSVhwMlUKZeyaDLxFMjSQv8ICwA8luz7+aw/VPnkT
            jbgj1mBV534XpGRMTC2DLnDuDnZ5JS5PbaFt6R3V5IfBD5hnh3KKqA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqNTk1YWZpRzA2QUFCSEgw
            K3VoYXFZVXA1VEFuMkJJRWdRL3luSmNFQmdBCmFHL2pRdGJ4Q0dlZnh3c1V6U1Rx
            eHJUYitXSEp4N3dtUW01TmwzSXNWcHMKLS0tIE5UdXh0RFJ2Q3E2cTc3cmgyRnNI
            OVhORDN6WGFoRWx2Wjl2dXZlT2w2U1UKKhoDLGFlvqSGFi5GikNOA2O1NQfnRmsw
            gOSxHOPfFWxyEpfQIJ5Tvjgbfkmt37QiS8NApI/mtxNe6+19L0GDow==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T15:41:00Z"
    mac: ENC[AES256_GCM,data:Rc1qhfpWXbjixmwkBYlIN/n5nMSkv20ctNsP+ANYMd0McalFv7AWeya/jLMTgTUieFkas9QF//bJLySqDplEDeFXgqXJyjNn3HXCub7K8rqdU3dzCd+09Qm2fFLTlYPgLu6O351smhiEAYtbyhMx4PumGFXcXsJzZE7Zzg2S8aE=,iv:D8EbZE/pq0k/Th9HqrKzEX9UQDFOA2QF27rQFDm9GgA=,tag:mbO5dVfl7XNhZoxaYOQ0lw==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data: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,iv:BM/8DYeEQXzGVCP5HoWIcipfNODtxKMGr+IoqizmifQ=,tag:FSebxB4KFjXbWISw+7fzWA==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLZ05YNXY1QzkwWnY2Vi81
            T1k5U3pLV3BRMnVoM1pVOVBQRVhIVk4reUY4CitBWUZyU1FIWDdXSVRFL1lYQ3hM
            S09ZcENDT2g1M3BlOVpuNGFzNU9qRVEKLS0tIG9BK1E1OGxoTjBWeWpqQVlrYWd1
            ZU8yMEZrSlNnaE4zdlVlU2NIOUR0YVUKyNzymC2+xJo/DB904ILGsMbksYu+fwet
            j3srCdpgT3vcqbc8QgkOPWt1y6uzdG7SBTVz9aiC7xWHmkzlbX1sBQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWVWlVcFNhV3J3TmdqbjV3
            Q3BvK0lUV1dNdnBDMWxGZ25MaDhZZ3ZzWUQ4CjhuNVlDTHdPYTdBZUJGdVVRem8x
            cytoQ3hxaDhYbmMwR0F5TWFQVTJDbEkKLS0tIFBmNDJsa2I1aGMyN0VqMFZRK21r
            c0ZnWVBqdDh1VnhDbHM5RmlHSVhwMlUKZeyaDLxFMjSQv8ICwA8luz7+aw/VPnkT
            jbgj1mBV534XpGRMTC2DLnDuDnZ5JS5PbaFt6R3V5IfBD5hnh3KKqA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqNTk1YWZpRzA2QUFCSEgw
            K3VoYXFZVXA1VEFuMkJJRWdRL3luSmNFQmdBCmFHL2pRdGJ4Q0dlZnh3c1V6U1Rx
            eHJUYitXSEp4N3dtUW01TmwzSXNWcHMKLS0tIE5UdXh0RFJ2Q3E2cTc3cmgyRnNI
            OVhORDN6WGFoRWx2Wjl2dXZlT2w2U1UKKhoDLGFlvqSGFi5GikNOA2O1NQfnRmsw
            gOSxHOPfFWxyEpfQIJ5Tvjgbfkmt37QiS8NApI/mtxNe6+19L0GDow==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T15:41:00Z"
    mac: ENC[AES256_GCM,data:Rc1qhfpWXbjixmwkBYlIN/n5nMSkv20ctNsP+ANYMd0McalFv7AWeya/jLMTgTUieFkas9QF//bJLySqDplEDeFXgqXJyjNn3HXCub7K8rqdU3dzCd+09Qm2fFLTlYPgLu6O351smhiEAYtbyhMx4PumGFXcXsJzZE7Zzg2S8aE=,iv:D8EbZE/pq0k/Th9HqrKzEX9UQDFOA2QF27rQFDm9GgA=,tag:mbO5dVfl7XNhZoxaYOQ0lw==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLZ05YNXY1QzkwWnY2Vi81
            T1k5U3pLV3BRMnVoM1pVOVBQRVhIVk4reUY4CitBWUZyU1FIWDdXSVRFL1lYQ3hM
            S09ZcENDT2g1M3BlOVpuNGFzNU9qRVEKLS0tIG9BK1E1OGxoTjBWeWpqQVlrYWd1
            ZU8yMEZrSlNnaE4zdlVlU2NIOUR0YVUKyNzymC2+xJo/DB904ILGsMbksYu+fwet
            j3srCdpgT3vcqbc8QgkOPWt1y6uzdG7SBTVz9aiC7xWHmkzlbX1sBQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWVWlVcFNhV3J3TmdqbjV3
            Q3BvK0lUV1dNdnBDMWxGZ25MaDhZZ3ZzWUQ4CjhuNVlDTHdPYTdBZUJGdVVRem8x
            cytoQ3hxaDhYbmMwR0F5TWFQVTJDbEkKLS0tIFBmNDJsa2I1aGMyN0VqMFZRK21r
            c0ZnWVBqdDh1VnhDbHM5RmlHSVhwMlUKZeyaDLxFMjSQv8ICwA8luz7+aw/VPnkT
            jbgj1mBV534XpGRMTC2DLnDuDnZ5JS5PbaFt6R3V5IfBD5hnh3KKqA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqNTk1YWZpRzA2QUFCSEgw
            K3VoYXFZVXA1VEFuMkJJRWdRL3luSmNFQmdBCmFHL2pRdGJ4Q0dlZnh3c1V6U1Rx
            eHJUYitXSEp4N3dtUW01TmwzSXNWcHMKLS0tIE5UdXh0RFJ2Q3E2cTc3cmgyRnNI
            OVhORDN6WGFoRWx2Wjl2dXZlT2w2U1UKKhoDLGFlvqSGFi5GikNOA2O1NQfnRmsw
            gOSxHOPfFWxyEpfQIJ5Tvjgbfkmt37QiS8NApI/mtxNe6+19L0GDow==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T15:41:00Z"
    mac: ENC[AES256_GCM,data:Rc1qhfpWXbjixmwkBYlIN/n5nMSkv20ctNsP+ANYMd0McalFv7AWeya/jLMTgTUieFkas9QF//bJLySqDplEDeFXgqXJyjNn3HXCub7K8rqdU3dzCd+09Qm2fFLTlYPgLu6O351smhiEAYtbyhMx4PumGFXcXsJzZE7Zzg2S8aE=,iv:D8EbZE/pq0k/Th9HqrKzEX9UQDFOA2QF27rQFDm9GgA=,tag:mbO5dVfl7XNhZoxaYOQ0lw==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLZ05YNXY1QzkwWnY2Vi81
            T1k5U3pLV3BRMnVoM1pVOVBQRVhIVk4reUY4CitBWUZyU1FIWDdXSVRFL1lYQ3hM
            S09ZcENDT2g1M3BlOVpuNGFzNU9qRVEKLS0tIG9BK1E1OGxoTjBWeWpqQVlrYWd1
            ZU8yMEZrSlNnaE4zdlVlU2NIOUR0YVUKyNzymC2+xJo/DB904ILGsMbksYu+fwet
            j3srCdpgT3vcqbc8QgkOPWt1y6uzdG7SBTVz9aiC7xWHmkzlbX1sBQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWVWlVcFNhV3J3TmdqbjV3
            Q3BvK0lUV1dNdnBDMWxGZ25MaDhZZ3ZzWUQ4CjhuNVlDTHdPYTdBZUJGdVVRem8x
            cytoQ3hxaDhYbmMwR0F5TWFQVTJDbEkKLS0tIFBmNDJsa2I1aGMyN0VqMFZRK21r
            c0ZnWVBqdDh1VnhDbHM5RmlHSVhwMlUKZeyaDLxFMjSQv8ICwA8luz7+aw/VPnkT
            jbgj1mBV534XpGRMTC2DLnDuDnZ5JS5PbaFt6R3V5IfBD5hnh3KKqA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqNTk1YWZpRzA2QUFCSEgw
            K3VoYXFZVXA1VEFuMkJJRWdRL3luSmNFQmdBCmFHL2pRdGJ4Q0dlZnh3c1V6U1Rx
            eHJUYitXSEp4N3dtUW01TmwzSXNWcHMKLS0tIE5UdXh0RFJ2Q3E2cTc3cmgyRnNI
            OVhORDN6WGFoRWx2Wjl2dXZlT2w2U1UKKhoDLGFlvqSGFi5GikNOA2O1NQfnRmsw
            gOSxHOPfFWxyEpfQIJ5Tvjgbfkmt37QiS8NApI/mtxNe6+19L0GDow==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T15:41:00Z"
    mac: ENC[AES256_GCM,data:Rc1qhfpWXbjixmwkBYlIN/n5nMSkv20ctNsP+ANYMd0McalFv7AWeya/jLMTgTUieFkas9QF//bJLySqDplEDeFXgqXJyjNn3HXCub7K8rqdU3dzCd+09Qm2fFLTlYPgLu6O351smhiEAYtbyhMx4PumGFXcXsJzZE7Zzg2S8aE=,iv:D8EbZE/pq0k/Th9HqrKzEX9UQDFOA2QF27rQFDm9GgA=,tag:mbO5dVfl7XNhZoxaYOQ0lw==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLZ05YNXY1QzkwWnY2Vi81
            T1k5U3pLV3BRMnVoM1pVOVBQRVhIVk4reUY4CitBWUZyU1FIWDdXSVRFL1lYQ3hM
            S09ZcENDT2g1M3BlOVpuNGFzNU9qRVEKLS0tIG9BK1E1OGxoTjBWeWpqQVlrYWd1
            ZU8yMEZrSlNnaE4zdlVlU2NIOUR0YVUKyNzymC2+xJo/DB904ILGsMbksYu+fwet
            j3srCdpgT3vcqbc8QgkOPWt1y6uzdG7SBTVz9aiC7xWHmkzlbX1sBQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBWVWlVcFNhV3J3TmdqbjV3
            Q3BvK0lUV1dNdnBDMWxGZ25MaDhZZ3ZzWUQ4CjhuNVlDTHdPYTdBZUJGdVVRem8x
            cytoQ3hxaDhYbmMwR0F5TWFQVTJDbEkKLS0tIFBmNDJsa2I1aGMyN0VqMFZRK21r
            c0ZnWVBqdDh1VnhDbHM5RmlHSVhwMlUKZeyaDLxFMjSQv8ICwA8luz7+aw/VPnkT
            jbgj1mBV534XpGRMTC2DLnDuDnZ5JS5PbaFt6R3V5IfBD5hnh3KKqA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqNTk1YWZpRzA2QUFCSEgw
            K3VoYXFZVXA1VEFuMkJJRWdRL3luSmNFQmdBCmFHL2pRdGJ4Q0dlZnh3c1V6U1Rx
            eHJUYitXSEp4N3dtUW01TmwzSXNWcHMKLS0tIE5UdXh0RFJ2Q3E2cTc3cmgyRnNI
            OVhORDN6WGFoRWx2Wjl2dXZlT2w2U1UKKhoDLGFlvqSGFi5GikNOA2O1NQfnRmsw
            gOSxHOPfFWxyEpfQIJ5Tvjgbfkmt37QiS8NApI/mtxNe6+19L0GDow==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T15:41:00Z"
    mac: ENC[AES256_GCM,data:Rc1qhfpWXbjixmwkBYlIN/n5nMSkv20ctNsP+ANYMd0McalFv7AWeya/jLMTgTUieFkas9QF//bJLySqDplEDeFXgqXJyjNn3HXCub7K8rqdU3dzCd+09Qm2fFLTlYPgLu6O351smhiEAYtbyhMx4PumGFXcXsJzZE7Zzg2S8aE=,iv:D8EbZE/pq0k/Th9HqrKzEX9UQDFOA2QF27rQFDm9GgA=,tag:mbO5dVfl7XNhZoxaYOQ0lw==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
