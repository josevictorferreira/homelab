apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: b68252509b6a96dd67953c31c429ccfbb9ab4f14afaef19372221192e3f8e3e3
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: GEMINI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: GEMINI_API_KEY
                            name: openclaw-secrets
                    - name: HOME
                      value: /home/node
                    - name: KIMI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: KIMI_API_KEY
                            name: openclaw-secrets
                    - name: MINIMAX_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: MINIMAX_API_KEY
                            name: openclaw-secrets
                    - name: OPENCLAW_MATRIX_TOKEN
                      valueFrom:
                        secretKeyRef:
                            key: OPENCLAW_MATRIX_TOKEN
                            name: openclaw-secrets
                    - name: OPENROUTER_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: OPENROUTER_API_KEY
                            name: openclaw-secrets
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.14@sha256:ace6f32961c4d574cb189d0007ec778408a9c02502f38af9ded6c864bae0f454
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB2NHlvQldDNW4wM2MrV0xD
            Y0kxd0t2TExDbTh0L2VPdG9ia2lTTGY2U1FrCkhaVk45ajFFc2lONUswWWRmY1ht
            N2ZUUURiMmJub1FUcGZBaFVuUXF4ekEKLS0tIEszMmtZUnVERVd0NHJ5RS8wWDBW
            SHFWdkFaNjFGbXoxczZmVVVFUFRSOE0K7xatnbLdr7SYQ23W/AKDRkya1z45S1XL
            A1HBqGTZUdV6RbKSQ5OK1K1pUK43k7q/aWGBq1bC5+Xz2OvSoBOI6g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6d3o2SkJydDhrczYrREFM
            WEIrMU91ZWpUaWlRRGZCNGhrSWtGZ3pUbTJZCmtOVnMyVGwwR1ppNnFKLzhQUWVs
            aWg3K0NROWxSam9mMW1NU1pnYlZyb3cKLS0tIHVvK3hhM2RqelFGNFFDV2VsSDN5
            UytaZ0ZJaGlUTkJWRGMyZ0UrNGVEM3cK6Jh05uE7sdcbxtjlbdchhURWeVr7O6+i
            aP0PI9+wPZNQJP2ptl4J7bMvp9iGXjsj+KEpcHq4/9EZuQhw3wRYWw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOZEFJWHY2cmFaZVJ2aVRx
            WTY2bXl2dE9vWHJRemtSZkVhWjFqajBLbjNFCm1lM29kSDlTODl2L0NwVFRIcGpQ
            R25sZFJySitkSHVwNG9UYjB2K3c2VFEKLS0tIGkyTDZ3NlpIdG5vOFJ2aW4vYkhm
            TUlVK1JmeW05QXM1UTROSnlHSUFQM2cK0QRlFyeLJlHQBWuFtcEi+xLt+ASQR6Wv
            mZEIKpEY3EEVhCx5WvYavedAM4gEjDKR/cMNHzDeMfwtjGSmdSEp3w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T14:20:12Z"
    mac: ENC[AES256_GCM,data:qvUqwdmgk2E6+DzOFsdKdM0cfPKR/SYFpvdTCDO4uwOOdkdTubCXL3VRvOfk28U3HYigxICB5UNyqPiny2k1aLTdd0vvtSztUfk6JrNgGpa5PwnIrLThb0Cbzp3Mqe4unKv5AfJeVqsB9YWJgFilUnCT8QGqA0uoIm199EJJu1o=,iv:4XjYhPeqUvUKlng9Nr1oED6xXG0uPeMEGOVZVDyeTsE=,tag:Su//2zgjr68lRlmDvrTrMA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data: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,iv:NMZ7VSgtni64cowvxW2ZcZbnHN6WTqD0i0NJ+UiGNZk=,tag:gFf+IX1pszy2FHDWfNAmzA==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB2NHlvQldDNW4wM2MrV0xD
            Y0kxd0t2TExDbTh0L2VPdG9ia2lTTGY2U1FrCkhaVk45ajFFc2lONUswWWRmY1ht
            N2ZUUURiMmJub1FUcGZBaFVuUXF4ekEKLS0tIEszMmtZUnVERVd0NHJ5RS8wWDBW
            SHFWdkFaNjFGbXoxczZmVVVFUFRSOE0K7xatnbLdr7SYQ23W/AKDRkya1z45S1XL
            A1HBqGTZUdV6RbKSQ5OK1K1pUK43k7q/aWGBq1bC5+Xz2OvSoBOI6g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6d3o2SkJydDhrczYrREFM
            WEIrMU91ZWpUaWlRRGZCNGhrSWtGZ3pUbTJZCmtOVnMyVGwwR1ppNnFKLzhQUWVs
            aWg3K0NROWxSam9mMW1NU1pnYlZyb3cKLS0tIHVvK3hhM2RqelFGNFFDV2VsSDN5
            UytaZ0ZJaGlUTkJWRGMyZ0UrNGVEM3cK6Jh05uE7sdcbxtjlbdchhURWeVr7O6+i
            aP0PI9+wPZNQJP2ptl4J7bMvp9iGXjsj+KEpcHq4/9EZuQhw3wRYWw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOZEFJWHY2cmFaZVJ2aVRx
            WTY2bXl2dE9vWHJRemtSZkVhWjFqajBLbjNFCm1lM29kSDlTODl2L0NwVFRIcGpQ
            R25sZFJySitkSHVwNG9UYjB2K3c2VFEKLS0tIGkyTDZ3NlpIdG5vOFJ2aW4vYkhm
            TUlVK1JmeW05QXM1UTROSnlHSUFQM2cK0QRlFyeLJlHQBWuFtcEi+xLt+ASQR6Wv
            mZEIKpEY3EEVhCx5WvYavedAM4gEjDKR/cMNHzDeMfwtjGSmdSEp3w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T14:20:12Z"
    mac: ENC[AES256_GCM,data:qvUqwdmgk2E6+DzOFsdKdM0cfPKR/SYFpvdTCDO4uwOOdkdTubCXL3VRvOfk28U3HYigxICB5UNyqPiny2k1aLTdd0vvtSztUfk6JrNgGpa5PwnIrLThb0Cbzp3Mqe4unKv5AfJeVqsB9YWJgFilUnCT8QGqA0uoIm199EJJu1o=,iv:4XjYhPeqUvUKlng9Nr1oED6xXG0uPeMEGOVZVDyeTsE=,tag:Su//2zgjr68lRlmDvrTrMA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB2NHlvQldDNW4wM2MrV0xD
            Y0kxd0t2TExDbTh0L2VPdG9ia2lTTGY2U1FrCkhaVk45ajFFc2lONUswWWRmY1ht
            N2ZUUURiMmJub1FUcGZBaFVuUXF4ekEKLS0tIEszMmtZUnVERVd0NHJ5RS8wWDBW
            SHFWdkFaNjFGbXoxczZmVVVFUFRSOE0K7xatnbLdr7SYQ23W/AKDRkya1z45S1XL
            A1HBqGTZUdV6RbKSQ5OK1K1pUK43k7q/aWGBq1bC5+Xz2OvSoBOI6g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6d3o2SkJydDhrczYrREFM
            WEIrMU91ZWpUaWlRRGZCNGhrSWtGZ3pUbTJZCmtOVnMyVGwwR1ppNnFKLzhQUWVs
            aWg3K0NROWxSam9mMW1NU1pnYlZyb3cKLS0tIHVvK3hhM2RqelFGNFFDV2VsSDN5
            UytaZ0ZJaGlUTkJWRGMyZ0UrNGVEM3cK6Jh05uE7sdcbxtjlbdchhURWeVr7O6+i
            aP0PI9+wPZNQJP2ptl4J7bMvp9iGXjsj+KEpcHq4/9EZuQhw3wRYWw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOZEFJWHY2cmFaZVJ2aVRx
            WTY2bXl2dE9vWHJRemtSZkVhWjFqajBLbjNFCm1lM29kSDlTODl2L0NwVFRIcGpQ
            R25sZFJySitkSHVwNG9UYjB2K3c2VFEKLS0tIGkyTDZ3NlpIdG5vOFJ2aW4vYkhm
            TUlVK1JmeW05QXM1UTROSnlHSUFQM2cK0QRlFyeLJlHQBWuFtcEi+xLt+ASQR6Wv
            mZEIKpEY3EEVhCx5WvYavedAM4gEjDKR/cMNHzDeMfwtjGSmdSEp3w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T14:20:12Z"
    mac: ENC[AES256_GCM,data:qvUqwdmgk2E6+DzOFsdKdM0cfPKR/SYFpvdTCDO4uwOOdkdTubCXL3VRvOfk28U3HYigxICB5UNyqPiny2k1aLTdd0vvtSztUfk6JrNgGpa5PwnIrLThb0Cbzp3Mqe4unKv5AfJeVqsB9YWJgFilUnCT8QGqA0uoIm199EJJu1o=,iv:4XjYhPeqUvUKlng9Nr1oED6xXG0uPeMEGOVZVDyeTsE=,tag:Su//2zgjr68lRlmDvrTrMA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB2NHlvQldDNW4wM2MrV0xD
            Y0kxd0t2TExDbTh0L2VPdG9ia2lTTGY2U1FrCkhaVk45ajFFc2lONUswWWRmY1ht
            N2ZUUURiMmJub1FUcGZBaFVuUXF4ekEKLS0tIEszMmtZUnVERVd0NHJ5RS8wWDBW
            SHFWdkFaNjFGbXoxczZmVVVFUFRSOE0K7xatnbLdr7SYQ23W/AKDRkya1z45S1XL
            A1HBqGTZUdV6RbKSQ5OK1K1pUK43k7q/aWGBq1bC5+Xz2OvSoBOI6g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6d3o2SkJydDhrczYrREFM
            WEIrMU91ZWpUaWlRRGZCNGhrSWtGZ3pUbTJZCmtOVnMyVGwwR1ppNnFKLzhQUWVs
            aWg3K0NROWxSam9mMW1NU1pnYlZyb3cKLS0tIHVvK3hhM2RqelFGNFFDV2VsSDN5
            UytaZ0ZJaGlUTkJWRGMyZ0UrNGVEM3cK6Jh05uE7sdcbxtjlbdchhURWeVr7O6+i
            aP0PI9+wPZNQJP2ptl4J7bMvp9iGXjsj+KEpcHq4/9EZuQhw3wRYWw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOZEFJWHY2cmFaZVJ2aVRx
            WTY2bXl2dE9vWHJRemtSZkVhWjFqajBLbjNFCm1lM29kSDlTODl2L0NwVFRIcGpQ
            R25sZFJySitkSHVwNG9UYjB2K3c2VFEKLS0tIGkyTDZ3NlpIdG5vOFJ2aW4vYkhm
            TUlVK1JmeW05QXM1UTROSnlHSUFQM2cK0QRlFyeLJlHQBWuFtcEi+xLt+ASQR6Wv
            mZEIKpEY3EEVhCx5WvYavedAM4gEjDKR/cMNHzDeMfwtjGSmdSEp3w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T14:20:12Z"
    mac: ENC[AES256_GCM,data:qvUqwdmgk2E6+DzOFsdKdM0cfPKR/SYFpvdTCDO4uwOOdkdTubCXL3VRvOfk28U3HYigxICB5UNyqPiny2k1aLTdd0vvtSztUfk6JrNgGpa5PwnIrLThb0Cbzp3Mqe4unKv5AfJeVqsB9YWJgFilUnCT8QGqA0uoIm199EJJu1o=,iv:4XjYhPeqUvUKlng9Nr1oED6xXG0uPeMEGOVZVDyeTsE=,tag:Su//2zgjr68lRlmDvrTrMA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB2NHlvQldDNW4wM2MrV0xD
            Y0kxd0t2TExDbTh0L2VPdG9ia2lTTGY2U1FrCkhaVk45ajFFc2lONUswWWRmY1ht
            N2ZUUURiMmJub1FUcGZBaFVuUXF4ekEKLS0tIEszMmtZUnVERVd0NHJ5RS8wWDBW
            SHFWdkFaNjFGbXoxczZmVVVFUFRSOE0K7xatnbLdr7SYQ23W/AKDRkya1z45S1XL
            A1HBqGTZUdV6RbKSQ5OK1K1pUK43k7q/aWGBq1bC5+Xz2OvSoBOI6g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB6d3o2SkJydDhrczYrREFM
            WEIrMU91ZWpUaWlRRGZCNGhrSWtGZ3pUbTJZCmtOVnMyVGwwR1ppNnFKLzhQUWVs
            aWg3K0NROWxSam9mMW1NU1pnYlZyb3cKLS0tIHVvK3hhM2RqelFGNFFDV2VsSDN5
            UytaZ0ZJaGlUTkJWRGMyZ0UrNGVEM3cK6Jh05uE7sdcbxtjlbdchhURWeVr7O6+i
            aP0PI9+wPZNQJP2ptl4J7bMvp9iGXjsj+KEpcHq4/9EZuQhw3wRYWw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOZEFJWHY2cmFaZVJ2aVRx
            WTY2bXl2dE9vWHJRemtSZkVhWjFqajBLbjNFCm1lM29kSDlTODl2L0NwVFRIcGpQ
            R25sZFJySitkSHVwNG9UYjB2K3c2VFEKLS0tIGkyTDZ3NlpIdG5vOFJ2aW4vYkhm
            TUlVK1JmeW05QXM1UTROSnlHSUFQM2cK0QRlFyeLJlHQBWuFtcEi+xLt+ASQR6Wv
            mZEIKpEY3EEVhCx5WvYavedAM4gEjDKR/cMNHzDeMfwtjGSmdSEp3w==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T14:20:12Z"
    mac: ENC[AES256_GCM,data:qvUqwdmgk2E6+DzOFsdKdM0cfPKR/SYFpvdTCDO4uwOOdkdTubCXL3VRvOfk28U3HYigxICB5UNyqPiny2k1aLTdd0vvtSztUfk6JrNgGpa5PwnIrLThb0Cbzp3Mqe4unKv5AfJeVqsB9YWJgFilUnCT8QGqA0uoIm199EJJu1o=,iv:4XjYhPeqUvUKlng9Nr1oED6xXG0uPeMEGOVZVDyeTsE=,tag:Su//2zgjr68lRlmDvrTrMA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
