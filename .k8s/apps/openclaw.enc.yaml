apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: caa2da43df7f0ac5ebc9a719d18fe542e73cb36dd47d038000eaebada99e2e76
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: HOME
                      value: /home/node
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.13@sha256:6026771358490d22af93dc462aa99e1c9d10fed1f6067aecd83a0c86bc8abafe
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBITnpzcUxhVDFraXRwTDhm
            NlQxcGF2aGRmQ0FGNktNbU4wZDFHRnRNZUhBCkJEMDlrQ2JsN3l4QmFNMzBUNHYy
            dytoQmNwWTBrYS9oRlQxVHRmcFNpTjgKLS0tIE4wTUN1ai9BREhNUUN3ZUdPWWph
            RzZXenEwWTc5M2crcVQ4YkxvSzJ1dlUKxJNgGFUnflgksB1U23i6uQ2cvYDnegnb
            nf9nWCQOEreJ3tRUMGaxEZKSo74p2rI4ai0+7lQxAr5ZnZt2jFYLXw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZYTl1dC9HbTgrN0tpMUNN
            Sy9xcEwxYVg1M3NNWmtmVDRZdWV0YTdWRmg4CkNtTjdaTG9sNWoydFJGQndsUEFo
            dVhvSW1WbVFkRDFYMTBUc2tWYlc4RkkKLS0tIFlOMzQ0Wm4xRythSWV6cVJ1bkFC
            d3pIR01nSXdmUkZnWnRDUk9XcjdkM2sKGmWmzWg8yY6SRXAApi56QJNpUJgVx46x
            Niqh+jd8fbnkwxdQnnLA51hbPV0181h8MGiw4r/4BlzZKRIqK5owgA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5VWZSUmxkUnkrRTBjUzZE
            VVREaHhKbk9vOTRHMkVyM3dEendzL08vR3d3CnFxK1RsM21aVjFMdXNaOVRiWWk5
            S0xDdUxrSjg3dlhWZFd0VjhGWFV0bjAKLS0tIEJ5K0trNnVTWm9XYk5ZVEZRK0VY
            Wmt3MG5rR2JhSHlObEUvWGhjakUzZXcKJelCpMTR9pRP/aEce0oXY1LJiGk8lvpn
            39NO/k47EO8Lo+1UFWn91evLWK3oqJ1F6+gbk7gH0/dYha4UmxXddA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T00:29:27Z"
    mac: ENC[AES256_GCM,data:DB+0gHwRj3+JCOwBm5kC6xb0RUVaU1Lw+5l3actZMoaCUeqU8Js7CdYPEXSTxklppdpFrzeSym/IhKo14CO0vWk0l1KrUESqKgQdIzeAsoHfWrRlWhrQRZlWexwyKZDSPCtY2FpMtL/0sGiO0YNMdQ5ZtRzEECiJSpdmXMgK8FQ=,iv:Qc5ipqTVMLwTqzcangXMJXUhFDW2/l133YbtjkkUMD4=,tag:tmGqAnlyzGCBiyNaaq9HkQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data: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,iv:DZwM9oNWRz7v/ZPhkioDZA4m0IQMz+QwDcB0j3jjgk0=,tag:dkLUAkBHDMulgq8I0PFqQQ==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBITnpzcUxhVDFraXRwTDhm
            NlQxcGF2aGRmQ0FGNktNbU4wZDFHRnRNZUhBCkJEMDlrQ2JsN3l4QmFNMzBUNHYy
            dytoQmNwWTBrYS9oRlQxVHRmcFNpTjgKLS0tIE4wTUN1ai9BREhNUUN3ZUdPWWph
            RzZXenEwWTc5M2crcVQ4YkxvSzJ1dlUKxJNgGFUnflgksB1U23i6uQ2cvYDnegnb
            nf9nWCQOEreJ3tRUMGaxEZKSo74p2rI4ai0+7lQxAr5ZnZt2jFYLXw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZYTl1dC9HbTgrN0tpMUNN
            Sy9xcEwxYVg1M3NNWmtmVDRZdWV0YTdWRmg4CkNtTjdaTG9sNWoydFJGQndsUEFo
            dVhvSW1WbVFkRDFYMTBUc2tWYlc4RkkKLS0tIFlOMzQ0Wm4xRythSWV6cVJ1bkFC
            d3pIR01nSXdmUkZnWnRDUk9XcjdkM2sKGmWmzWg8yY6SRXAApi56QJNpUJgVx46x
            Niqh+jd8fbnkwxdQnnLA51hbPV0181h8MGiw4r/4BlzZKRIqK5owgA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5VWZSUmxkUnkrRTBjUzZE
            VVREaHhKbk9vOTRHMkVyM3dEendzL08vR3d3CnFxK1RsM21aVjFMdXNaOVRiWWk5
            S0xDdUxrSjg3dlhWZFd0VjhGWFV0bjAKLS0tIEJ5K0trNnVTWm9XYk5ZVEZRK0VY
            Wmt3MG5rR2JhSHlObEUvWGhjakUzZXcKJelCpMTR9pRP/aEce0oXY1LJiGk8lvpn
            39NO/k47EO8Lo+1UFWn91evLWK3oqJ1F6+gbk7gH0/dYha4UmxXddA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T00:29:27Z"
    mac: ENC[AES256_GCM,data:DB+0gHwRj3+JCOwBm5kC6xb0RUVaU1Lw+5l3actZMoaCUeqU8Js7CdYPEXSTxklppdpFrzeSym/IhKo14CO0vWk0l1KrUESqKgQdIzeAsoHfWrRlWhrQRZlWexwyKZDSPCtY2FpMtL/0sGiO0YNMdQ5ZtRzEECiJSpdmXMgK8FQ=,iv:Qc5ipqTVMLwTqzcangXMJXUhFDW2/l133YbtjkkUMD4=,tag:tmGqAnlyzGCBiyNaaq9HkQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBITnpzcUxhVDFraXRwTDhm
            NlQxcGF2aGRmQ0FGNktNbU4wZDFHRnRNZUhBCkJEMDlrQ2JsN3l4QmFNMzBUNHYy
            dytoQmNwWTBrYS9oRlQxVHRmcFNpTjgKLS0tIE4wTUN1ai9BREhNUUN3ZUdPWWph
            RzZXenEwWTc5M2crcVQ4YkxvSzJ1dlUKxJNgGFUnflgksB1U23i6uQ2cvYDnegnb
            nf9nWCQOEreJ3tRUMGaxEZKSo74p2rI4ai0+7lQxAr5ZnZt2jFYLXw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZYTl1dC9HbTgrN0tpMUNN
            Sy9xcEwxYVg1M3NNWmtmVDRZdWV0YTdWRmg4CkNtTjdaTG9sNWoydFJGQndsUEFo
            dVhvSW1WbVFkRDFYMTBUc2tWYlc4RkkKLS0tIFlOMzQ0Wm4xRythSWV6cVJ1bkFC
            d3pIR01nSXdmUkZnWnRDUk9XcjdkM2sKGmWmzWg8yY6SRXAApi56QJNpUJgVx46x
            Niqh+jd8fbnkwxdQnnLA51hbPV0181h8MGiw4r/4BlzZKRIqK5owgA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5VWZSUmxkUnkrRTBjUzZE
            VVREaHhKbk9vOTRHMkVyM3dEendzL08vR3d3CnFxK1RsM21aVjFMdXNaOVRiWWk5
            S0xDdUxrSjg3dlhWZFd0VjhGWFV0bjAKLS0tIEJ5K0trNnVTWm9XYk5ZVEZRK0VY
            Wmt3MG5rR2JhSHlObEUvWGhjakUzZXcKJelCpMTR9pRP/aEce0oXY1LJiGk8lvpn
            39NO/k47EO8Lo+1UFWn91evLWK3oqJ1F6+gbk7gH0/dYha4UmxXddA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T00:29:27Z"
    mac: ENC[AES256_GCM,data:DB+0gHwRj3+JCOwBm5kC6xb0RUVaU1Lw+5l3actZMoaCUeqU8Js7CdYPEXSTxklppdpFrzeSym/IhKo14CO0vWk0l1KrUESqKgQdIzeAsoHfWrRlWhrQRZlWexwyKZDSPCtY2FpMtL/0sGiO0YNMdQ5ZtRzEECiJSpdmXMgK8FQ=,iv:Qc5ipqTVMLwTqzcangXMJXUhFDW2/l133YbtjkkUMD4=,tag:tmGqAnlyzGCBiyNaaq9HkQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBITnpzcUxhVDFraXRwTDhm
            NlQxcGF2aGRmQ0FGNktNbU4wZDFHRnRNZUhBCkJEMDlrQ2JsN3l4QmFNMzBUNHYy
            dytoQmNwWTBrYS9oRlQxVHRmcFNpTjgKLS0tIE4wTUN1ai9BREhNUUN3ZUdPWWph
            RzZXenEwWTc5M2crcVQ4YkxvSzJ1dlUKxJNgGFUnflgksB1U23i6uQ2cvYDnegnb
            nf9nWCQOEreJ3tRUMGaxEZKSo74p2rI4ai0+7lQxAr5ZnZt2jFYLXw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZYTl1dC9HbTgrN0tpMUNN
            Sy9xcEwxYVg1M3NNWmtmVDRZdWV0YTdWRmg4CkNtTjdaTG9sNWoydFJGQndsUEFo
            dVhvSW1WbVFkRDFYMTBUc2tWYlc4RkkKLS0tIFlOMzQ0Wm4xRythSWV6cVJ1bkFC
            d3pIR01nSXdmUkZnWnRDUk9XcjdkM2sKGmWmzWg8yY6SRXAApi56QJNpUJgVx46x
            Niqh+jd8fbnkwxdQnnLA51hbPV0181h8MGiw4r/4BlzZKRIqK5owgA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5VWZSUmxkUnkrRTBjUzZE
            VVREaHhKbk9vOTRHMkVyM3dEendzL08vR3d3CnFxK1RsM21aVjFMdXNaOVRiWWk5
            S0xDdUxrSjg3dlhWZFd0VjhGWFV0bjAKLS0tIEJ5K0trNnVTWm9XYk5ZVEZRK0VY
            Wmt3MG5rR2JhSHlObEUvWGhjakUzZXcKJelCpMTR9pRP/aEce0oXY1LJiGk8lvpn
            39NO/k47EO8Lo+1UFWn91evLWK3oqJ1F6+gbk7gH0/dYha4UmxXddA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T00:29:27Z"
    mac: ENC[AES256_GCM,data:DB+0gHwRj3+JCOwBm5kC6xb0RUVaU1Lw+5l3actZMoaCUeqU8Js7CdYPEXSTxklppdpFrzeSym/IhKo14CO0vWk0l1KrUESqKgQdIzeAsoHfWrRlWhrQRZlWexwyKZDSPCtY2FpMtL/0sGiO0YNMdQ5ZtRzEECiJSpdmXMgK8FQ=,iv:Qc5ipqTVMLwTqzcangXMJXUhFDW2/l133YbtjkkUMD4=,tag:tmGqAnlyzGCBiyNaaq9HkQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBITnpzcUxhVDFraXRwTDhm
            NlQxcGF2aGRmQ0FGNktNbU4wZDFHRnRNZUhBCkJEMDlrQ2JsN3l4QmFNMzBUNHYy
            dytoQmNwWTBrYS9oRlQxVHRmcFNpTjgKLS0tIE4wTUN1ai9BREhNUUN3ZUdPWWph
            RzZXenEwWTc5M2crcVQ4YkxvSzJ1dlUKxJNgGFUnflgksB1U23i6uQ2cvYDnegnb
            nf9nWCQOEreJ3tRUMGaxEZKSo74p2rI4ai0+7lQxAr5ZnZt2jFYLXw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBZYTl1dC9HbTgrN0tpMUNN
            Sy9xcEwxYVg1M3NNWmtmVDRZdWV0YTdWRmg4CkNtTjdaTG9sNWoydFJGQndsUEFo
            dVhvSW1WbVFkRDFYMTBUc2tWYlc4RkkKLS0tIFlOMzQ0Wm4xRythSWV6cVJ1bkFC
            d3pIR01nSXdmUkZnWnRDUk9XcjdkM2sKGmWmzWg8yY6SRXAApi56QJNpUJgVx46x
            Niqh+jd8fbnkwxdQnnLA51hbPV0181h8MGiw4r/4BlzZKRIqK5owgA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5VWZSUmxkUnkrRTBjUzZE
            VVREaHhKbk9vOTRHMkVyM3dEendzL08vR3d3CnFxK1RsM21aVjFMdXNaOVRiWWk5
            S0xDdUxrSjg3dlhWZFd0VjhGWFV0bjAKLS0tIEJ5K0trNnVTWm9XYk5ZVEZRK0VY
            Wmt3MG5rR2JhSHlObEUvWGhjakUzZXcKJelCpMTR9pRP/aEce0oXY1LJiGk8lvpn
            39NO/k47EO8Lo+1UFWn91evLWK3oqJ1F6+gbk7gH0/dYha4UmxXddA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T00:29:27Z"
    mac: ENC[AES256_GCM,data:DB+0gHwRj3+JCOwBm5kC6xb0RUVaU1Lw+5l3actZMoaCUeqU8Js7CdYPEXSTxklppdpFrzeSym/IhKo14CO0vWk0l1KrUESqKgQdIzeAsoHfWrRlWhrQRZlWexwyKZDSPCtY2FpMtL/0sGiO0YNMdQ5ZtRzEECiJSpdmXMgK8FQ=,iv:Qc5ipqTVMLwTqzcangXMJXUhFDW2/l133YbtjkkUMD4=,tag:tmGqAnlyzGCBiyNaaq9HkQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
