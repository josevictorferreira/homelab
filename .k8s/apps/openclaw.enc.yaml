apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: e3b108132ada1617c4bfcfca646e1a95d9b318b66c064dfa324f825570c2a676
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - node dist/index.js doctor --fix && node dist/index.js gateway --allow-unconfigured
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /app/extensions/matrix
                      name: hide-bundled-matrix
                    - mountPath: /home/node
                      name: main
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "true"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsPolicy: ClusterFirst
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                - command:
                    - sh
                    - -c
                    - |
                      set -e

                      PLUGIN_DIR="/home/node/.openclaw/extensions/matrix"

                      # Check if already installed with all deps (including native binary)
                      if [ -d "$PLUGIN_DIR/node_modules/@vector-im/matrix-bot-sdk" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/markdown-it" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/@matrix-org/matrix-sdk-crypto-nodejs-linux-x64-gnu" ]; then
                        echo "Matrix plugin deps already installed"
                        exit 0
                      fi

                      echo "Setting up matrix plugin in persistent volume..."

                      # Copy plugin source from bundled location (not hidden here - emptyDir only on main)
                      rm -rf "$PLUGIN_DIR"
                      mkdir -p "$PLUGIN_DIR"
                      cp -r /app/extensions/matrix/* "$PLUGIN_DIR/"

                      # Remove devDependencies (workspace ref) from package.json
                      cd "$PLUGIN_DIR"
                      sed -i '/"devDependencies"/,/}/d' package.json
                      # Remove trailing comma before closing brace if any
                      sed -i ':a;N;$!ba;s/,\n}/\n}/g' package.json

                      # Allow native module build scripts (pnpm v10+ blocks them by default)
                      # Without this, @matrix-org/matrix-sdk-crypto-nodejs postinstall won't run
                      # and the platform-specific binary won't be downloaded
                      node -e "
                        const pkg = JSON.parse(require('fs').readFileSync('package.json','utf8'));
                        pkg.pnpm = { onlyBuiltDependencies: ['@matrix-org/matrix-sdk-crypto-nodejs'] };
                        require('fs').writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "

                      echo "Installing dependencies with pnpm..."
                      pnpm install --no-frozen-lockfile 2>&1

                      echo "Matrix plugin installed successfully"
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: install-matrix-plugin
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - emptyDir: {}
                  name: hide-bundled-matrix
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSRUFSZWx2cHo5eFBWTXVw
            M0NXc1pqUlVTc1VWVTVXaTNhY0tMajdNSjJ3Cm9ERG5KVWJyUFRwTzBzdmlvN3Fk
            Q09xbHQ3UXF4REUvNFI3TGRjWEdNTWcKLS0tIDBxdTVMd01IcUNRYnRySDhHbGdo
            SENkRzk0SVd4Z2tLUnpmOWtEanZaMVEKrrHg6hP32O6PfAkhxsbvN8aq/AdKqhMw
            YUUMgCjcVFQuiLcetWeOakRWgxskh0iHKaTbmTN70ulL01IvscOVLw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUzJwcHJTMTBJSlhuT1Ux
            VVhrWVNKaS95NiswcDUyRHJVcWNxYkMxVERRCmJvRGt6bGdnNGZUQ0RLTFJhRXJK
            azdhbFFnWFYxYmNKdzlSVVVXcUIybW8KLS0tIFpyU3dZQ0VLN2pnVmpvQU9reXpJ
            bzBqaU1BU0FNMVdTbjdYNm8wVXF1cWMKR4pLJoeO462O2TL/xr2wNsZKI9ppqOrq
            Kl2HbrLp4n++TTllzmowSEUELYfyyTU5mDipBGbfkASToaRMAS9dSQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBDS1k1MWxncWk4cmZpbHNR
            MUl3WW8zbkpYbVZwcFVUK1BiLzBzODNIMGhJClViQnpTc3NuazhLYjZHTFlQdEFH
            eTAwZVN4eStRNWUwTWZCSWpzM0pMb1UKLS0tIGVDU1dhYzgzb1p3WHl2N1V0Yng5
            ZC9ISHBtSnVzaC90ZS9ON05SWmhiWGMKkdpXHrfetjJpVBBpMezt44WK1l0sBQTk
            fDWNq3zrRZMCEUneDzlwSP+B18fxLu91vB0ooliBzLRRuzE0vp9sCA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:56:15Z"
    mac: ENC[AES256_GCM,data:pQGWL1RIFDPWWSJROCDQy3T2gzQbLcVqlaXa5rn6h3U/vBn4ennauHZtrWJ4oQX7GK0GIdQpoFpP6gFvLQXjZXQpdX73jA8w1rbLDvXstqnf0OHd/CApgnhiDDKcoa4Cg9M3mVAFGfTXGve2lMxk7bUPxrMWQTCtxEDME9IOUvY=,iv:IN6xXz39iqFWDv0aVwltI9lmGsvEbHOlPFC7wAabYW8=,tag:PuQ6tbZ7FbS8D9qzKCLvvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data:Jy3JFrzQ7e+xQaHm4SIjfc/7xayEbv06YmmxQ4myQbl4TBdzlo6pL/RvmpxLIYQvgF+PTLje5JGp6GdG4xhCauffTD+NKwSVvbrU7CAIW/tOs7hLNvIquPZYxVmJjvW7Ujx0Z6XerSGbaan7vZ4ZKTsntqN9ipuxbgyggwtRraEAh5EZSuLdnQJIFBGANW5lzUl+QVFtf+5/jk3kJZt4t7lhvSBGskjPWEr8g1flgaxebByul7PnrIoHihVYow2Yi8GpSIQY6/YeTtHcgxAIcj8/zaXpz+7DCbKGHZ9HvVsdMgjee4i9TXH/LoM8b4tsamTsXpyN+hTrRx2ralifaFrCBQJuWR0UfUPXT6yNcVFFndGupEXuMBETOVjT5ppwJU8Db68QMEH3RGFUr8B8Hl6N+xpx8O3whXlZgWXT8mjpj/8CELr+qYrFgFBn4bT9DcK0dD+hnTye5wHk0zAKLW7GLG2LiThlkrI47PAmJ6OknwXGwiHwqf9BnLyRWb3oMIyr3FX0dyJNk9C5ZX8QiT4g6q9f4ZiQTg/G5Y29olaNKGTKTaV0D6gsw/lrDNm7CvCYMicyAClkMwrIIuN5LvYo2tXJop4qTq5f9/g7XxZsyW5BqEz30HxPQOxyiOKb3St9ymVFhIE+byaOffanxeXt6iOgH6fBjZpLTb06O41JLu4BE/YAENdTtQEzOSjlF04S2BDtQBxIIDIR92blTbXotFdtGjEBJy+vP25B8E8HqHxYkp+A9aYJnu4FzTNQLc0Ao9eRFPAyT7Os7uY6q6K/9mQx0t7WTQnPmbUPz5kLCPmuljkG3Yj/wnL/a6LGFoTOq9gW8Am5QGKiLoTKYw8milqIWdpn0eYHAI1bWu84upYaZ8COaWrQ0VZwpyI7OxNCgoxAYjjrlvhc9ZJpVNLdfEqkKj2AeHO4UMmXVIXWm2mCKv+R1jKXYsDnkv2kkAc+KJoklInsfQtoDNhsUJBqLAQBcgBk0nHGkvmLXEiyJZlX+M2xzlvcfvR8TPu5fViq8h+/pJHvC4RuL75cGzHI7Z3SsZeDvNr3NJ1YnziEvQc37RbsJ6jQZ07amB+KcEJ8I+2YCr2uTBqpqA3jU8LGnKoL7zdDd5wHKZUQZV7EMpeg7nzkmDSEZGDk+ysc3UjIbPVVm6ZnVOu75xIOW5qkEpVlAziNBExNkt80iHwRx58ivOm3bPtgZ7kYGHrn6U70/d4SVadWOEWyaD4JBncnwWSeMPb2N9N9JlgNyCJ6TuH1NQ6qZDtDud881u4vvTjLUMxykbFMO8gqZkVL+a4ZFXnBsk8RCslvp42tkHS361UCbxo7aWWua0i1mVpNDwFCBDKlrelrd6TJuqW1nkxGKsME4NV0n9/o539gl1IOzjL8FyuNRsElNJoyb4JZsWI9DtbjdKqZO3m3IB4j0BKNDBWyC6ewssUX1cluRba5Sb27s9Esmfa1FqoLN6TDbZ6ej2vgik4+J69cTlopQ7P4/NqJuSvy3YdZZY6y3ifFXZ91fyKlhaS5FP/6fPMULqQ=,iv:Ijq/a13Wg0vObt9s5Z98rBGMoC9BpwcPd6AdKNVacBA=,tag:Jb+WmfvX2x5/TkC0KTIt0g==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSRUFSZWx2cHo5eFBWTXVw
            M0NXc1pqUlVTc1VWVTVXaTNhY0tMajdNSjJ3Cm9ERG5KVWJyUFRwTzBzdmlvN3Fk
            Q09xbHQ3UXF4REUvNFI3TGRjWEdNTWcKLS0tIDBxdTVMd01IcUNRYnRySDhHbGdo
            SENkRzk0SVd4Z2tLUnpmOWtEanZaMVEKrrHg6hP32O6PfAkhxsbvN8aq/AdKqhMw
            YUUMgCjcVFQuiLcetWeOakRWgxskh0iHKaTbmTN70ulL01IvscOVLw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUzJwcHJTMTBJSlhuT1Ux
            VVhrWVNKaS95NiswcDUyRHJVcWNxYkMxVERRCmJvRGt6bGdnNGZUQ0RLTFJhRXJK
            azdhbFFnWFYxYmNKdzlSVVVXcUIybW8KLS0tIFpyU3dZQ0VLN2pnVmpvQU9reXpJ
            bzBqaU1BU0FNMVdTbjdYNm8wVXF1cWMKR4pLJoeO462O2TL/xr2wNsZKI9ppqOrq
            Kl2HbrLp4n++TTllzmowSEUELYfyyTU5mDipBGbfkASToaRMAS9dSQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBDS1k1MWxncWk4cmZpbHNR
            MUl3WW8zbkpYbVZwcFVUK1BiLzBzODNIMGhJClViQnpTc3NuazhLYjZHTFlQdEFH
            eTAwZVN4eStRNWUwTWZCSWpzM0pMb1UKLS0tIGVDU1dhYzgzb1p3WHl2N1V0Yng5
            ZC9ISHBtSnVzaC90ZS9ON05SWmhiWGMKkdpXHrfetjJpVBBpMezt44WK1l0sBQTk
            fDWNq3zrRZMCEUneDzlwSP+B18fxLu91vB0ooliBzLRRuzE0vp9sCA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:56:15Z"
    mac: ENC[AES256_GCM,data:pQGWL1RIFDPWWSJROCDQy3T2gzQbLcVqlaXa5rn6h3U/vBn4ennauHZtrWJ4oQX7GK0GIdQpoFpP6gFvLQXjZXQpdX73jA8w1rbLDvXstqnf0OHd/CApgnhiDDKcoa4Cg9M3mVAFGfTXGve2lMxk7bUPxrMWQTCtxEDME9IOUvY=,iv:IN6xXz39iqFWDv0aVwltI9lmGsvEbHOlPFC7wAabYW8=,tag:PuQ6tbZ7FbS8D9qzKCLvvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSRUFSZWx2cHo5eFBWTXVw
            M0NXc1pqUlVTc1VWVTVXaTNhY0tMajdNSjJ3Cm9ERG5KVWJyUFRwTzBzdmlvN3Fk
            Q09xbHQ3UXF4REUvNFI3TGRjWEdNTWcKLS0tIDBxdTVMd01IcUNRYnRySDhHbGdo
            SENkRzk0SVd4Z2tLUnpmOWtEanZaMVEKrrHg6hP32O6PfAkhxsbvN8aq/AdKqhMw
            YUUMgCjcVFQuiLcetWeOakRWgxskh0iHKaTbmTN70ulL01IvscOVLw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUzJwcHJTMTBJSlhuT1Ux
            VVhrWVNKaS95NiswcDUyRHJVcWNxYkMxVERRCmJvRGt6bGdnNGZUQ0RLTFJhRXJK
            azdhbFFnWFYxYmNKdzlSVVVXcUIybW8KLS0tIFpyU3dZQ0VLN2pnVmpvQU9reXpJ
            bzBqaU1BU0FNMVdTbjdYNm8wVXF1cWMKR4pLJoeO462O2TL/xr2wNsZKI9ppqOrq
            Kl2HbrLp4n++TTllzmowSEUELYfyyTU5mDipBGbfkASToaRMAS9dSQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBDS1k1MWxncWk4cmZpbHNR
            MUl3WW8zbkpYbVZwcFVUK1BiLzBzODNIMGhJClViQnpTc3NuazhLYjZHTFlQdEFH
            eTAwZVN4eStRNWUwTWZCSWpzM0pMb1UKLS0tIGVDU1dhYzgzb1p3WHl2N1V0Yng5
            ZC9ISHBtSnVzaC90ZS9ON05SWmhiWGMKkdpXHrfetjJpVBBpMezt44WK1l0sBQTk
            fDWNq3zrRZMCEUneDzlwSP+B18fxLu91vB0ooliBzLRRuzE0vp9sCA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:56:15Z"
    mac: ENC[AES256_GCM,data:pQGWL1RIFDPWWSJROCDQy3T2gzQbLcVqlaXa5rn6h3U/vBn4ennauHZtrWJ4oQX7GK0GIdQpoFpP6gFvLQXjZXQpdX73jA8w1rbLDvXstqnf0OHd/CApgnhiDDKcoa4Cg9M3mVAFGfTXGve2lMxk7bUPxrMWQTCtxEDME9IOUvY=,iv:IN6xXz39iqFWDv0aVwltI9lmGsvEbHOlPFC7wAabYW8=,tag:PuQ6tbZ7FbS8D9qzKCLvvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSRUFSZWx2cHo5eFBWTXVw
            M0NXc1pqUlVTc1VWVTVXaTNhY0tMajdNSjJ3Cm9ERG5KVWJyUFRwTzBzdmlvN3Fk
            Q09xbHQ3UXF4REUvNFI3TGRjWEdNTWcKLS0tIDBxdTVMd01IcUNRYnRySDhHbGdo
            SENkRzk0SVd4Z2tLUnpmOWtEanZaMVEKrrHg6hP32O6PfAkhxsbvN8aq/AdKqhMw
            YUUMgCjcVFQuiLcetWeOakRWgxskh0iHKaTbmTN70ulL01IvscOVLw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUzJwcHJTMTBJSlhuT1Ux
            VVhrWVNKaS95NiswcDUyRHJVcWNxYkMxVERRCmJvRGt6bGdnNGZUQ0RLTFJhRXJK
            azdhbFFnWFYxYmNKdzlSVVVXcUIybW8KLS0tIFpyU3dZQ0VLN2pnVmpvQU9reXpJ
            bzBqaU1BU0FNMVdTbjdYNm8wVXF1cWMKR4pLJoeO462O2TL/xr2wNsZKI9ppqOrq
            Kl2HbrLp4n++TTllzmowSEUELYfyyTU5mDipBGbfkASToaRMAS9dSQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBDS1k1MWxncWk4cmZpbHNR
            MUl3WW8zbkpYbVZwcFVUK1BiLzBzODNIMGhJClViQnpTc3NuazhLYjZHTFlQdEFH
            eTAwZVN4eStRNWUwTWZCSWpzM0pMb1UKLS0tIGVDU1dhYzgzb1p3WHl2N1V0Yng5
            ZC9ISHBtSnVzaC90ZS9ON05SWmhiWGMKkdpXHrfetjJpVBBpMezt44WK1l0sBQTk
            fDWNq3zrRZMCEUneDzlwSP+B18fxLu91vB0ooliBzLRRuzE0vp9sCA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:56:15Z"
    mac: ENC[AES256_GCM,data:pQGWL1RIFDPWWSJROCDQy3T2gzQbLcVqlaXa5rn6h3U/vBn4ennauHZtrWJ4oQX7GK0GIdQpoFpP6gFvLQXjZXQpdX73jA8w1rbLDvXstqnf0OHd/CApgnhiDDKcoa4Cg9M3mVAFGfTXGve2lMxk7bUPxrMWQTCtxEDME9IOUvY=,iv:IN6xXz39iqFWDv0aVwltI9lmGsvEbHOlPFC7wAabYW8=,tag:PuQ6tbZ7FbS8D9qzKCLvvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBSRUFSZWx2cHo5eFBWTXVw
            M0NXc1pqUlVTc1VWVTVXaTNhY0tMajdNSjJ3Cm9ERG5KVWJyUFRwTzBzdmlvN3Fk
            Q09xbHQ3UXF4REUvNFI3TGRjWEdNTWcKLS0tIDBxdTVMd01IcUNRYnRySDhHbGdo
            SENkRzk0SVd4Z2tLUnpmOWtEanZaMVEKrrHg6hP32O6PfAkhxsbvN8aq/AdKqhMw
            YUUMgCjcVFQuiLcetWeOakRWgxskh0iHKaTbmTN70ulL01IvscOVLw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUzJwcHJTMTBJSlhuT1Ux
            VVhrWVNKaS95NiswcDUyRHJVcWNxYkMxVERRCmJvRGt6bGdnNGZUQ0RLTFJhRXJK
            azdhbFFnWFYxYmNKdzlSVVVXcUIybW8KLS0tIFpyU3dZQ0VLN2pnVmpvQU9reXpJ
            bzBqaU1BU0FNMVdTbjdYNm8wVXF1cWMKR4pLJoeO462O2TL/xr2wNsZKI9ppqOrq
            Kl2HbrLp4n++TTllzmowSEUELYfyyTU5mDipBGbfkASToaRMAS9dSQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBDS1k1MWxncWk4cmZpbHNR
            MUl3WW8zbkpYbVZwcFVUK1BiLzBzODNIMGhJClViQnpTc3NuazhLYjZHTFlQdEFH
            eTAwZVN4eStRNWUwTWZCSWpzM0pMb1UKLS0tIGVDU1dhYzgzb1p3WHl2N1V0Yng5
            ZC9ISHBtSnVzaC90ZS9ON05SWmhiWGMKkdpXHrfetjJpVBBpMezt44WK1l0sBQTk
            fDWNq3zrRZMCEUneDzlwSP+B18fxLu91vB0ooliBzLRRuzE0vp9sCA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:56:15Z"
    mac: ENC[AES256_GCM,data:pQGWL1RIFDPWWSJROCDQy3T2gzQbLcVqlaXa5rn6h3U/vBn4ennauHZtrWJ4oQX7GK0GIdQpoFpP6gFvLQXjZXQpdX73jA8w1rbLDvXstqnf0OHd/CApgnhiDDKcoa4Cg9M3mVAFGfTXGve2lMxk7bUPxrMWQTCtxEDME9IOUvY=,iv:IN6xXz39iqFWDv0aVwltI9lmGsvEbHOlPFC7wAabYW8=,tag:PuQ6tbZ7FbS8D9qzKCLvvg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
