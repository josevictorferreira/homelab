apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: c69a5d8e9b9071d85814bc6337e02f3efd5458cc2c988a7b7147f78258f6a4e4
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: HOME
                      value: /home/node
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjdlgvM0xxdnFhVWFQTDJW
            Z2U0dUZBREtsOWF2T2VIc09JMlNsLzdtS2xVClhURDVoUEpleWJsSGRUek13ZGpP
            SmU4RTN2NThJbFNaY2hRR1p5a0kxOFkKLS0tIHpRRzlZWEwwZWZ6RkNkcWxkckdz
            K1ZOTE5qTFZsUnBuNktkdGxrNm43c0UK7I90mhN1FLqwYz4L51JLS7MAvcuUxrl+
            8FQ2MjQegplpY/N5qbfEYnqoq3Hj/rdwv7Eywgj98Y+amCQSgIMlcg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBFTGhYTHB3WkhkYXFqalZH
            YTVtWXpnaHNqeUtjVEp1Z0JnUzVNTTUvMVRNCm9WZ0V3cFl1cmcwR2tnMTVwL2M2
            Nld6YzlvR0ZNTFhtZVpkSjhjU0ZHWTQKLS0tIEYzdHc4c2xuOXVma05pSmFTdGVG
            K1JKbGdlSVhndG9LcVcvOHpTUi9MNW8KYeIBWNEZF63r4+gZb5PzVznCd5Mq5pBA
            wtiHtj77iQMpUwzI2Y+OXtA7Iz8rtOA4jl35ICR+b0XOAPMvxlNXIA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBleGFxcVhiVk1XS3laRndO
            dThadS8yWnFYRmVCa2hDMXJ0SnFualNYdGhJCmNpNStaeXJLbUQ3QzVVeVdjdFJU
            R1pLOWdrVVJwMjlmS0g2RTRCZWZsTzAKLS0tIGl4NVplOEtuNWZEMFRzL1lwOUNX
            Wmo0cG1Wa2pQUm03RWcvMnF6ZUFwZFkKs2iCdCRZSsfmWL+sB0iqm02GFOBhZXHU
            YYOjuThFGsXakCFkUQFCI5/4ntksphTb1CRzU1/aFb+NG3z861Qkwg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T23:52:44Z"
    mac: ENC[AES256_GCM,data:LkN3DqRmqpTyAaFERw936BPVhafboLd8RKqIoSS+6WJKmHZChpd5c5bf/sU3In9UGEWguIABu0HK1MbBg7kJlkW5JMgPCBxly4XR7bA1GcOgzglEXokpP17+V6FkUGKPKiA5TJgBoZ8SBgqMQn/BTs3ogdCyxVtIDKwJWD+By9Y=,iv:9Fe7N9BlJUtXosqJFChWID8SNoJWOJSRCeO7hQYtQ4k=,tag:OiPpEqBkCPkN6defwtNKLQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data:GkiKR4RPtUZEbbjBq946ykQYKh99azBAvbxC8TkTE5BcRnGnWH2v+RROJYJemG59Ut2WjkA9NsKnCm1IV7UQTuvcjwokqWG+lnuEta2ayFHURmO7Zo7ih8ctTwyRjtZNMdJQoRK856gRSfES67beHJVU8xe4opLxT+KM2UBuqZK40UnJ8BZAwHb7dIAUG4L8xedJLLD5phxheg2/qvvyfzNLTUfeaPHzHatZ3Rqf727KY26ClAApbWFoQa62ME7Avw5lHQclrFygFxTZNbpwY4Fm8nVkJeyKsqKpwTldTyPv1PMnFDtoHFemjsJLRC87uXqsDzZcLp/e+oJErsLixGUszCzhXG+DEUNlP3hy+6rnJw0O42RpoGW5GdllLng7tawP63wCn5FQh/BDD3VzJiSDzm44La/8ZzIXAsHJ4uzXQZI2S1uBC7KGulL7tGOtVcoMlmbcBvkTJABOLabQy/mV0Sbi8Y8smgvEJiZfjPfv+SOrjSVlEVfRjZ30y30cl/+a3s8FxVG+SlMMWwbVKb39AVWxhiFfv09Det9VQirTxySj+OVMNP04PIxsKWwDI/nWF0WVv3fJDWwf7fngaV3QxFTB16Emz8NYaVsiz7fA5wa6zUzCyrIGOwCDTw+PdxmODpzxsCT1VY4pDPRqFngrL/b2OwlcOx5gL8wtT0f7cc+orbkXe3baZhM2FkLCke5p9TZNDb62/pyhcveJ3v8AZV+b4qaAhuA/qQxiDLWJMC4iaNXhFCat6RAiWcHf+9aJmOmnMkcAH5N58BhWMpDC6cu3i6cADD46LB0ymJY+1NbhxedFaEm82ViVUSscaL3TjT0FMW6mqKseFh73DGE5U+lkNQVmgs+EQPaEgKEzjv0tzZ/nADmWBRXSz/bb1eemrDYmXxWnrs/mtCjdI8P4uO1+dm5hfv9JXCvdSBzzRC+qccNTA0BqZJLjLgybzrL9xitenF+P8NmxLLIkpJgl6GqtLQpwIyagkSv73ldCY35/ibmWdKfe5ViB2yfzEGD59lREBNfpZQocGntW2g56VZEL2gDOqekg/qC8PWBoRD/A5JZYNPgQN5b5jw0VcHJlLe8iqsfYo40Xpwp+4yAaMWsdGqdJdznFd/mYFEZmKXctvdSkw1P9ZbT+JerQguqq+sU5iDN3j17TjouqCaDhS4g9IQAt2n99NsBkEZz/Mr+CLac21SbmvIGZTLO/hPhCASfvaBseLfiZgUNsOk/Sl1NzeCTU82G4wxeWVs056STUr5WyVWgyKI4APtYp524qSmg0NfBoy9or3jo5j4a3eFt8L/BJL63AvkYaEGCUloMl2DI8mBTZyuOrfsvF5c+IFzmZubw9Kl3IvdIdIjSk4IuLk6U+A3cCC1vf3Snu9E6jGKSY7rpwqLAVrRMgMAYJEim7SdRTf2PjfhrxEp++lJoQDm6tyk5fmO8uRededmVSQdS6r4u7jQN7VmBIe+lleRb9BaDgkqa/XQ3aCkNoO6dMjW9FsVW8VF8nrDqz0IhGaYzRJFHa98hpwHQX8UOsAU9PeHuSOzzvR9ApzX3gJEsQpDbutOz23sjqaw8SzydXxlySo7k4nb0rxRF/WRyl+sZrGtMG7RWX8N6k9kAshEKG5HwzOI3BjxMSToZAZKfRYFXhutmjwECeZu9zemtBK4F/1cU2NYb/5GGxkCfUr8WB+0l9/J5gCquWcqnwFqm63j78k7X1CKdvra+HQnxgkrzwSvXEi0BkGFHqOg61JtQ6Yqli+IosZuniP7d3EALN4gQyMdyvJTNg5UdKtL69wxcX/eMSl6+pmEXGKCKSYr2dPGzHlSygAkE=,iv:xWdGAZyW9CKcdUERhzAsUh5qNId2KE18OG4SmedTQtQ=,tag:fzkWLBVRMsozVczgM6ey8Q==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjdlgvM0xxdnFhVWFQTDJW
            Z2U0dUZBREtsOWF2T2VIc09JMlNsLzdtS2xVClhURDVoUEpleWJsSGRUek13ZGpP
            SmU4RTN2NThJbFNaY2hRR1p5a0kxOFkKLS0tIHpRRzlZWEwwZWZ6RkNkcWxkckdz
            K1ZOTE5qTFZsUnBuNktkdGxrNm43c0UK7I90mhN1FLqwYz4L51JLS7MAvcuUxrl+
            8FQ2MjQegplpY/N5qbfEYnqoq3Hj/rdwv7Eywgj98Y+amCQSgIMlcg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBFTGhYTHB3WkhkYXFqalZH
            YTVtWXpnaHNqeUtjVEp1Z0JnUzVNTTUvMVRNCm9WZ0V3cFl1cmcwR2tnMTVwL2M2
            Nld6YzlvR0ZNTFhtZVpkSjhjU0ZHWTQKLS0tIEYzdHc4c2xuOXVma05pSmFTdGVG
            K1JKbGdlSVhndG9LcVcvOHpTUi9MNW8KYeIBWNEZF63r4+gZb5PzVznCd5Mq5pBA
            wtiHtj77iQMpUwzI2Y+OXtA7Iz8rtOA4jl35ICR+b0XOAPMvxlNXIA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBleGFxcVhiVk1XS3laRndO
            dThadS8yWnFYRmVCa2hDMXJ0SnFualNYdGhJCmNpNStaeXJLbUQ3QzVVeVdjdFJU
            R1pLOWdrVVJwMjlmS0g2RTRCZWZsTzAKLS0tIGl4NVplOEtuNWZEMFRzL1lwOUNX
            Wmo0cG1Wa2pQUm03RWcvMnF6ZUFwZFkKs2iCdCRZSsfmWL+sB0iqm02GFOBhZXHU
            YYOjuThFGsXakCFkUQFCI5/4ntksphTb1CRzU1/aFb+NG3z861Qkwg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T23:52:44Z"
    mac: ENC[AES256_GCM,data:LkN3DqRmqpTyAaFERw936BPVhafboLd8RKqIoSS+6WJKmHZChpd5c5bf/sU3In9UGEWguIABu0HK1MbBg7kJlkW5JMgPCBxly4XR7bA1GcOgzglEXokpP17+V6FkUGKPKiA5TJgBoZ8SBgqMQn/BTs3ogdCyxVtIDKwJWD+By9Y=,iv:9Fe7N9BlJUtXosqJFChWID8SNoJWOJSRCeO7hQYtQ4k=,tag:OiPpEqBkCPkN6defwtNKLQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjdlgvM0xxdnFhVWFQTDJW
            Z2U0dUZBREtsOWF2T2VIc09JMlNsLzdtS2xVClhURDVoUEpleWJsSGRUek13ZGpP
            SmU4RTN2NThJbFNaY2hRR1p5a0kxOFkKLS0tIHpRRzlZWEwwZWZ6RkNkcWxkckdz
            K1ZOTE5qTFZsUnBuNktkdGxrNm43c0UK7I90mhN1FLqwYz4L51JLS7MAvcuUxrl+
            8FQ2MjQegplpY/N5qbfEYnqoq3Hj/rdwv7Eywgj98Y+amCQSgIMlcg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBFTGhYTHB3WkhkYXFqalZH
            YTVtWXpnaHNqeUtjVEp1Z0JnUzVNTTUvMVRNCm9WZ0V3cFl1cmcwR2tnMTVwL2M2
            Nld6YzlvR0ZNTFhtZVpkSjhjU0ZHWTQKLS0tIEYzdHc4c2xuOXVma05pSmFTdGVG
            K1JKbGdlSVhndG9LcVcvOHpTUi9MNW8KYeIBWNEZF63r4+gZb5PzVznCd5Mq5pBA
            wtiHtj77iQMpUwzI2Y+OXtA7Iz8rtOA4jl35ICR+b0XOAPMvxlNXIA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBleGFxcVhiVk1XS3laRndO
            dThadS8yWnFYRmVCa2hDMXJ0SnFualNYdGhJCmNpNStaeXJLbUQ3QzVVeVdjdFJU
            R1pLOWdrVVJwMjlmS0g2RTRCZWZsTzAKLS0tIGl4NVplOEtuNWZEMFRzL1lwOUNX
            Wmo0cG1Wa2pQUm03RWcvMnF6ZUFwZFkKs2iCdCRZSsfmWL+sB0iqm02GFOBhZXHU
            YYOjuThFGsXakCFkUQFCI5/4ntksphTb1CRzU1/aFb+NG3z861Qkwg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T23:52:44Z"
    mac: ENC[AES256_GCM,data:LkN3DqRmqpTyAaFERw936BPVhafboLd8RKqIoSS+6WJKmHZChpd5c5bf/sU3In9UGEWguIABu0HK1MbBg7kJlkW5JMgPCBxly4XR7bA1GcOgzglEXokpP17+V6FkUGKPKiA5TJgBoZ8SBgqMQn/BTs3ogdCyxVtIDKwJWD+By9Y=,iv:9Fe7N9BlJUtXosqJFChWID8SNoJWOJSRCeO7hQYtQ4k=,tag:OiPpEqBkCPkN6defwtNKLQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjdlgvM0xxdnFhVWFQTDJW
            Z2U0dUZBREtsOWF2T2VIc09JMlNsLzdtS2xVClhURDVoUEpleWJsSGRUek13ZGpP
            SmU4RTN2NThJbFNaY2hRR1p5a0kxOFkKLS0tIHpRRzlZWEwwZWZ6RkNkcWxkckdz
            K1ZOTE5qTFZsUnBuNktkdGxrNm43c0UK7I90mhN1FLqwYz4L51JLS7MAvcuUxrl+
            8FQ2MjQegplpY/N5qbfEYnqoq3Hj/rdwv7Eywgj98Y+amCQSgIMlcg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBFTGhYTHB3WkhkYXFqalZH
            YTVtWXpnaHNqeUtjVEp1Z0JnUzVNTTUvMVRNCm9WZ0V3cFl1cmcwR2tnMTVwL2M2
            Nld6YzlvR0ZNTFhtZVpkSjhjU0ZHWTQKLS0tIEYzdHc4c2xuOXVma05pSmFTdGVG
            K1JKbGdlSVhndG9LcVcvOHpTUi9MNW8KYeIBWNEZF63r4+gZb5PzVznCd5Mq5pBA
            wtiHtj77iQMpUwzI2Y+OXtA7Iz8rtOA4jl35ICR+b0XOAPMvxlNXIA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBleGFxcVhiVk1XS3laRndO
            dThadS8yWnFYRmVCa2hDMXJ0SnFualNYdGhJCmNpNStaeXJLbUQ3QzVVeVdjdFJU
            R1pLOWdrVVJwMjlmS0g2RTRCZWZsTzAKLS0tIGl4NVplOEtuNWZEMFRzL1lwOUNX
            Wmo0cG1Wa2pQUm03RWcvMnF6ZUFwZFkKs2iCdCRZSsfmWL+sB0iqm02GFOBhZXHU
            YYOjuThFGsXakCFkUQFCI5/4ntksphTb1CRzU1/aFb+NG3z861Qkwg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T23:52:44Z"
    mac: ENC[AES256_GCM,data:LkN3DqRmqpTyAaFERw936BPVhafboLd8RKqIoSS+6WJKmHZChpd5c5bf/sU3In9UGEWguIABu0HK1MbBg7kJlkW5JMgPCBxly4XR7bA1GcOgzglEXokpP17+V6FkUGKPKiA5TJgBoZ8SBgqMQn/BTs3ogdCyxVtIDKwJWD+By9Y=,iv:9Fe7N9BlJUtXosqJFChWID8SNoJWOJSRCeO7hQYtQ4k=,tag:OiPpEqBkCPkN6defwtNKLQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjdlgvM0xxdnFhVWFQTDJW
            Z2U0dUZBREtsOWF2T2VIc09JMlNsLzdtS2xVClhURDVoUEpleWJsSGRUek13ZGpP
            SmU4RTN2NThJbFNaY2hRR1p5a0kxOFkKLS0tIHpRRzlZWEwwZWZ6RkNkcWxkckdz
            K1ZOTE5qTFZsUnBuNktkdGxrNm43c0UK7I90mhN1FLqwYz4L51JLS7MAvcuUxrl+
            8FQ2MjQegplpY/N5qbfEYnqoq3Hj/rdwv7Eywgj98Y+amCQSgIMlcg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBFTGhYTHB3WkhkYXFqalZH
            YTVtWXpnaHNqeUtjVEp1Z0JnUzVNTTUvMVRNCm9WZ0V3cFl1cmcwR2tnMTVwL2M2
            Nld6YzlvR0ZNTFhtZVpkSjhjU0ZHWTQKLS0tIEYzdHc4c2xuOXVma05pSmFTdGVG
            K1JKbGdlSVhndG9LcVcvOHpTUi9MNW8KYeIBWNEZF63r4+gZb5PzVznCd5Mq5pBA
            wtiHtj77iQMpUwzI2Y+OXtA7Iz8rtOA4jl35ICR+b0XOAPMvxlNXIA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBleGFxcVhiVk1XS3laRndO
            dThadS8yWnFYRmVCa2hDMXJ0SnFualNYdGhJCmNpNStaeXJLbUQ3QzVVeVdjdFJU
            R1pLOWdrVVJwMjlmS0g2RTRCZWZsTzAKLS0tIGl4NVplOEtuNWZEMFRzL1lwOUNX
            Wmo0cG1Wa2pQUm03RWcvMnF6ZUFwZFkKs2iCdCRZSsfmWL+sB0iqm02GFOBhZXHU
            YYOjuThFGsXakCFkUQFCI5/4ntksphTb1CRzU1/aFb+NG3z861Qkwg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T23:52:44Z"
    mac: ENC[AES256_GCM,data:LkN3DqRmqpTyAaFERw936BPVhafboLd8RKqIoSS+6WJKmHZChpd5c5bf/sU3In9UGEWguIABu0HK1MbBg7kJlkW5JMgPCBxly4XR7bA1GcOgzglEXokpP17+V6FkUGKPKiA5TJgBoZ8SBgqMQn/BTs3ogdCyxVtIDKwJWD+By9Y=,iv:9Fe7N9BlJUtXosqJFChWID8SNoJWOJSRCeO7hQYtQ4k=,tag:OiPpEqBkCPkN6defwtNKLQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
