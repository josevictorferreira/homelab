apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: a9077ed3a58c783048a8b874c898d5fbf99a3abc0d2b157309f0c2a8b00b4b0f
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: GEMINI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: GEMINI_API_KEY
                            name: openclaw-secrets
                    - name: HOME
                      value: /home/node
                    - name: KIMI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: KIMI_API_KEY
                            name: openclaw-secrets
                    - name: MINIMAX_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: MINIMAX_API_KEY
                            name: openclaw-secrets
                    - name: OPENCLAW_MATRIX_TOKEN
                      valueFrom:
                        secretKeyRef:
                            key: openclaw_matrix_token
                            name: openclaw-secrets
                    - name: OPENROUTER_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: OPENROUTER_API_KEY
                            name: openclaw-secrets
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.13@sha256:6026771358490d22af93dc462aa99e1c9d10fed1f6067aecd83a0c86bc8abafe
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVRXYzZGpwZmx5YVliYnNZ
            L1JQVkF5UE53MXVxVndiUVpFTjR6K1g2VFc4ClI0RktkM0Z5ekNUM2VGbHBac1Bp
            UDZKMkdJZ0VsR1NsMWRieXYzRWdWV1kKLS0tIEFxNm1CSlRScE9ENTJlZTUzek5F
            SjRRSmJZSEk5dnJKeVBna0E0MS85Yk0KTXS+KTJXJuFe2eMq1qVwyhiHSrFKfCo0
            gMSu4Yv5MqC42DzRPcx/UqSggqJrpRl7m7sGxXPMAk8QUrHm2Fp4WA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBEVXh4TkNiZ1pCZWxaTU5j
            MUNMTUNaYWRIR3pBenk2dDNtQ0haS29GRldZCmxUWmEza2VtL1B0emh2a0s1WnQz
            bmhoWHgvMFkydW5YbGpqTUZXWkVWQjAKLS0tIGQ0WlBHTEJTRit1TGNHS2hoOTIx
            NE84WEVxbDMrYkVlVGtOS2dNaW11aTAKg074ZgUju0WubaRPH5TgRwhNc+FKGJOq
            lmhpnjM4iRUwVo8OqqlvWp/2gHuSaQ33Dv3wN/1B86mSe7ERGFM3ew==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWm5TbDcxMldnK1FZL2RJ
            ZVJyWEZ5RUFjMmxObHZvYytrcFdIYmFIdlh3ClhBWmVXSlJKTEpaT3o5UGlOb29w
            M2s4TjZGdGhLamVsR0wyZUppNGFKOW8KLS0tIG1vMHdxaWlZSEpZMWFWTzVub0NF
            bytuaDBoZEd1bGc5SFcrbHZJbWRMZlkKn3wfccczMa2mXgo4H9ErnwkN3kVNVvoR
            j/yRet24lVYyVy72l9Kn1nGH6lbsWMQIBXdwbOd0lPouCXYQ33rdvA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T02:35:00Z"
    mac: ENC[AES256_GCM,data:ZFW3omgae3+XCRZfFgpQThaY4yLekkxzhWUO1ImHZziNn+lp+e3PYpiCKOVABXlItnCYYryo9JHdp55mZhlO8iGT7IUdyrs/jDn8IRr0uSROXtqAG5Pc+GuF4NSHDJpdSEdG+prrg/qY4iPiXsCYKeGlRYkBW84jXtezXYkUaLg=,iv:QGM3tqx1hF7ORHn16pc3sFMaJ5kDLmKWR8n+mQSKKTg=,tag:8vHzhpiw3FugqaP7feLLnQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data: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,iv:xnBzcDveQj95pU9BKKV1hzllBLvdcmEA2ydBXcqdPfQ=,tag:QHQjPOZmOTolN4/jRxIlIQ==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVRXYzZGpwZmx5YVliYnNZ
            L1JQVkF5UE53MXVxVndiUVpFTjR6K1g2VFc4ClI0RktkM0Z5ekNUM2VGbHBac1Bp
            UDZKMkdJZ0VsR1NsMWRieXYzRWdWV1kKLS0tIEFxNm1CSlRScE9ENTJlZTUzek5F
            SjRRSmJZSEk5dnJKeVBna0E0MS85Yk0KTXS+KTJXJuFe2eMq1qVwyhiHSrFKfCo0
            gMSu4Yv5MqC42DzRPcx/UqSggqJrpRl7m7sGxXPMAk8QUrHm2Fp4WA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBEVXh4TkNiZ1pCZWxaTU5j
            MUNMTUNaYWRIR3pBenk2dDNtQ0haS29GRldZCmxUWmEza2VtL1B0emh2a0s1WnQz
            bmhoWHgvMFkydW5YbGpqTUZXWkVWQjAKLS0tIGQ0WlBHTEJTRit1TGNHS2hoOTIx
            NE84WEVxbDMrYkVlVGtOS2dNaW11aTAKg074ZgUju0WubaRPH5TgRwhNc+FKGJOq
            lmhpnjM4iRUwVo8OqqlvWp/2gHuSaQ33Dv3wN/1B86mSe7ERGFM3ew==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWm5TbDcxMldnK1FZL2RJ
            ZVJyWEZ5RUFjMmxObHZvYytrcFdIYmFIdlh3ClhBWmVXSlJKTEpaT3o5UGlOb29w
            M2s4TjZGdGhLamVsR0wyZUppNGFKOW8KLS0tIG1vMHdxaWlZSEpZMWFWTzVub0NF
            bytuaDBoZEd1bGc5SFcrbHZJbWRMZlkKn3wfccczMa2mXgo4H9ErnwkN3kVNVvoR
            j/yRet24lVYyVy72l9Kn1nGH6lbsWMQIBXdwbOd0lPouCXYQ33rdvA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T02:35:00Z"
    mac: ENC[AES256_GCM,data:ZFW3omgae3+XCRZfFgpQThaY4yLekkxzhWUO1ImHZziNn+lp+e3PYpiCKOVABXlItnCYYryo9JHdp55mZhlO8iGT7IUdyrs/jDn8IRr0uSROXtqAG5Pc+GuF4NSHDJpdSEdG+prrg/qY4iPiXsCYKeGlRYkBW84jXtezXYkUaLg=,iv:QGM3tqx1hF7ORHn16pc3sFMaJ5kDLmKWR8n+mQSKKTg=,tag:8vHzhpiw3FugqaP7feLLnQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVRXYzZGpwZmx5YVliYnNZ
            L1JQVkF5UE53MXVxVndiUVpFTjR6K1g2VFc4ClI0RktkM0Z5ekNUM2VGbHBac1Bp
            UDZKMkdJZ0VsR1NsMWRieXYzRWdWV1kKLS0tIEFxNm1CSlRScE9ENTJlZTUzek5F
            SjRRSmJZSEk5dnJKeVBna0E0MS85Yk0KTXS+KTJXJuFe2eMq1qVwyhiHSrFKfCo0
            gMSu4Yv5MqC42DzRPcx/UqSggqJrpRl7m7sGxXPMAk8QUrHm2Fp4WA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBEVXh4TkNiZ1pCZWxaTU5j
            MUNMTUNaYWRIR3pBenk2dDNtQ0haS29GRldZCmxUWmEza2VtL1B0emh2a0s1WnQz
            bmhoWHgvMFkydW5YbGpqTUZXWkVWQjAKLS0tIGQ0WlBHTEJTRit1TGNHS2hoOTIx
            NE84WEVxbDMrYkVlVGtOS2dNaW11aTAKg074ZgUju0WubaRPH5TgRwhNc+FKGJOq
            lmhpnjM4iRUwVo8OqqlvWp/2gHuSaQ33Dv3wN/1B86mSe7ERGFM3ew==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWm5TbDcxMldnK1FZL2RJ
            ZVJyWEZ5RUFjMmxObHZvYytrcFdIYmFIdlh3ClhBWmVXSlJKTEpaT3o5UGlOb29w
            M2s4TjZGdGhLamVsR0wyZUppNGFKOW8KLS0tIG1vMHdxaWlZSEpZMWFWTzVub0NF
            bytuaDBoZEd1bGc5SFcrbHZJbWRMZlkKn3wfccczMa2mXgo4H9ErnwkN3kVNVvoR
            j/yRet24lVYyVy72l9Kn1nGH6lbsWMQIBXdwbOd0lPouCXYQ33rdvA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T02:35:00Z"
    mac: ENC[AES256_GCM,data:ZFW3omgae3+XCRZfFgpQThaY4yLekkxzhWUO1ImHZziNn+lp+e3PYpiCKOVABXlItnCYYryo9JHdp55mZhlO8iGT7IUdyrs/jDn8IRr0uSROXtqAG5Pc+GuF4NSHDJpdSEdG+prrg/qY4iPiXsCYKeGlRYkBW84jXtezXYkUaLg=,iv:QGM3tqx1hF7ORHn16pc3sFMaJ5kDLmKWR8n+mQSKKTg=,tag:8vHzhpiw3FugqaP7feLLnQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVRXYzZGpwZmx5YVliYnNZ
            L1JQVkF5UE53MXVxVndiUVpFTjR6K1g2VFc4ClI0RktkM0Z5ekNUM2VGbHBac1Bp
            UDZKMkdJZ0VsR1NsMWRieXYzRWdWV1kKLS0tIEFxNm1CSlRScE9ENTJlZTUzek5F
            SjRRSmJZSEk5dnJKeVBna0E0MS85Yk0KTXS+KTJXJuFe2eMq1qVwyhiHSrFKfCo0
            gMSu4Yv5MqC42DzRPcx/UqSggqJrpRl7m7sGxXPMAk8QUrHm2Fp4WA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBEVXh4TkNiZ1pCZWxaTU5j
            MUNMTUNaYWRIR3pBenk2dDNtQ0haS29GRldZCmxUWmEza2VtL1B0emh2a0s1WnQz
            bmhoWHgvMFkydW5YbGpqTUZXWkVWQjAKLS0tIGQ0WlBHTEJTRit1TGNHS2hoOTIx
            NE84WEVxbDMrYkVlVGtOS2dNaW11aTAKg074ZgUju0WubaRPH5TgRwhNc+FKGJOq
            lmhpnjM4iRUwVo8OqqlvWp/2gHuSaQ33Dv3wN/1B86mSe7ERGFM3ew==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWm5TbDcxMldnK1FZL2RJ
            ZVJyWEZ5RUFjMmxObHZvYytrcFdIYmFIdlh3ClhBWmVXSlJKTEpaT3o5UGlOb29w
            M2s4TjZGdGhLamVsR0wyZUppNGFKOW8KLS0tIG1vMHdxaWlZSEpZMWFWTzVub0NF
            bytuaDBoZEd1bGc5SFcrbHZJbWRMZlkKn3wfccczMa2mXgo4H9ErnwkN3kVNVvoR
            j/yRet24lVYyVy72l9Kn1nGH6lbsWMQIBXdwbOd0lPouCXYQ33rdvA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T02:35:00Z"
    mac: ENC[AES256_GCM,data:ZFW3omgae3+XCRZfFgpQThaY4yLekkxzhWUO1ImHZziNn+lp+e3PYpiCKOVABXlItnCYYryo9JHdp55mZhlO8iGT7IUdyrs/jDn8IRr0uSROXtqAG5Pc+GuF4NSHDJpdSEdG+prrg/qY4iPiXsCYKeGlRYkBW84jXtezXYkUaLg=,iv:QGM3tqx1hF7ORHn16pc3sFMaJ5kDLmKWR8n+mQSKKTg=,tag:8vHzhpiw3FugqaP7feLLnQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVRXYzZGpwZmx5YVliYnNZ
            L1JQVkF5UE53MXVxVndiUVpFTjR6K1g2VFc4ClI0RktkM0Z5ekNUM2VGbHBac1Bp
            UDZKMkdJZ0VsR1NsMWRieXYzRWdWV1kKLS0tIEFxNm1CSlRScE9ENTJlZTUzek5F
            SjRRSmJZSEk5dnJKeVBna0E0MS85Yk0KTXS+KTJXJuFe2eMq1qVwyhiHSrFKfCo0
            gMSu4Yv5MqC42DzRPcx/UqSggqJrpRl7m7sGxXPMAk8QUrHm2Fp4WA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBEVXh4TkNiZ1pCZWxaTU5j
            MUNMTUNaYWRIR3pBenk2dDNtQ0haS29GRldZCmxUWmEza2VtL1B0emh2a0s1WnQz
            bmhoWHgvMFkydW5YbGpqTUZXWkVWQjAKLS0tIGQ0WlBHTEJTRit1TGNHS2hoOTIx
            NE84WEVxbDMrYkVlVGtOS2dNaW11aTAKg074ZgUju0WubaRPH5TgRwhNc+FKGJOq
            lmhpnjM4iRUwVo8OqqlvWp/2gHuSaQ33Dv3wN/1B86mSe7ERGFM3ew==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBOWm5TbDcxMldnK1FZL2RJ
            ZVJyWEZ5RUFjMmxObHZvYytrcFdIYmFIdlh3ClhBWmVXSlJKTEpaT3o5UGlOb29w
            M2s4TjZGdGhLamVsR0wyZUppNGFKOW8KLS0tIG1vMHdxaWlZSEpZMWFWTzVub0NF
            bytuaDBoZEd1bGc5SFcrbHZJbWRMZlkKn3wfccczMa2mXgo4H9ErnwkN3kVNVvoR
            j/yRet24lVYyVy72l9Kn1nGH6lbsWMQIBXdwbOd0lPouCXYQ33rdvA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T02:35:00Z"
    mac: ENC[AES256_GCM,data:ZFW3omgae3+XCRZfFgpQThaY4yLekkxzhWUO1ImHZziNn+lp+e3PYpiCKOVABXlItnCYYryo9JHdp55mZhlO8iGT7IUdyrs/jDn8IRr0uSROXtqAG5Pc+GuF4NSHDJpdSEdG+prrg/qY4iPiXsCYKeGlRYkBW84jXtezXYkUaLg=,iv:QGM3tqx1hF7ORHn16pc3sFMaJ5kDLmKWR8n+mQSKKTg=,tag:8vHzhpiw3FugqaP7feLLnQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
