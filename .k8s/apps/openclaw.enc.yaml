apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: cf24116b6eb179dfb0659b25f1cdee87edec773ad6fe12b93ec4f69a2decd31d
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: GEMINI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: GEMINI_API_KEY
                            name: openclaw-secrets
                    - name: HOME
                      value: /home/node
                    - name: KIMI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: KIMI_API_KEY
                            name: openclaw-secrets
                    - name: MINIMAX_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: MINIMAX_API_KEY
                            name: openclaw-secrets
                    - name: OPENROUTER_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: OPENROUTER_API_KEY
                            name: openclaw-secrets
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.13@sha256:6026771358490d22af93dc462aa99e1c9d10fed1f6067aecd83a0c86bc8abafe
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBWVdzR3RucFZyNk5SRi9x
            U0NrUlhxYXRaUlVQck9NZXA4L0JodkVlaURnCkMxd3ZHUXMwQVc4cGRYZEpzTndS
            Rksrejl6VWRxUzE4UFJWTXBaajZoUUUKLS0tIEFESEdtMGVJUDhUOHBnV0s3aWZ2
            UlBjMGg4L2pCS0RpNEdBV3BvQnpITXcK5pfNeUOTM4D6u2kLS4fSDVeAC+2deRlG
            yTW8ec/HLg3/H/vRQn0/1LVQU9eVGkn9V0nSXQBvN6JRwrR6AwDLIw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXZzBQTmVEcm9xYzZBR0hv
            Z05KSWUvblEyTEpSMVlhdnpFa2JwMnNraDFzCmppOUtJQnBpNDIxV1dBaXphN2kw
            RTVTVWYySFB3QzNJOUJWY2E2Q0t2TWsKLS0tIEE5WjAvSnFLQUFLa1V4eFhWSnEx
            VlQyZTRIcVY3VVp5cFluQTg5OWh1d28KXZAiOpLOfUJ7aF7ANrzGlXYQ3zWMC3bn
            Jl9z4Ib2S7ctVCZztL0KmMRKqVZMRluXQE5tVV860wA32nLzSEsaNw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJK0o3MjJzMFQ3VkJOcytq
            SDQ3RWJQbFdwQWIrQyt0cWhKeWV1cVdXY0IwCnBxQ0ZEYjRMb25mY2ZHTlVNeVVx
            c3VCaEdCcTJzMFlJTGZHcHJZamV0Y2sKLS0tIGUvNVo4Wlh6Q3BqQ3FXT0FaUEtZ
            dDlabzhMSzR6ZGlUK2FLd1djc3czUDAK3SR88A6EjrBMlL/rCrvcEA+u75iKFP4z
            vAWtTaeUfIn43n4PowBpKQqXoz/so4bJVXr1mrfjNlgr6csn57ZxLg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:19:04Z"
    mac: ENC[AES256_GCM,data:shWPCHA2BjM5H27pfYke9+/5Jybka5HWHZy+WC/DiFX28rLDQUMc75aZxxMVIDc94rV2FVXY/fTybAaTvsx5unsZJVS5krIDG40qn/s61xHA9207/D21IdwCjEIKzuBXZuKOJvYJ9wrqO+vcvk2Zmue+4NvW69pQZppPVQUEzLI=,iv:Q4GHsvPYRX9jxeMdQlhxiUSt0fOSZ6I1Nh4QcUMnUXc=,tag:F3JQQhpfbwwMLYXfGrMOGQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data:Rc2cLepYrm440sr/Yubw5UKSxLevcdtwCnmiIg9YOW1gzQwncTmQGexRoHxhhJIrM3v5tklrmRsGbu99uZJnif8TqRylut+u63F3W/lY8MU/n4Z4ECXZjrtI4WSbNNVVJiKdBJYZZio3tDzSPhRvTQ8XVjwTsYXsYDHMVygHYTjYyKP9yLGiHnxsb5c/3ry+0ENON4S91bNjJ0I+Mf6K3JCRrdyBjbdlK4qtgipWC1Wh7mLi9ILW3VC7+hcIr7Ca4DVSBnKmo/YysLuBqFOlJj94j/AdubeUYHcLBtXRFXQenlavEFNoQG65Pv1A+52fqfqpi5rYCVJNGneyqhNXVapR5Q8QYmgXjO735xMz7WFDSXiPhknb4waUAeDzOti8t5ElSpgeokOVTjYGcp3TxYWgU1gPNRq4ZMCcK+/82W4rt7WQrqc6yKB5HS+imuogi5ZmVdB2QaYyHGVEub3FQLElvq8KZKyK5KIdFcrR4zs5laeI+IcLiWqdn0fkWNzq0q6TX3k5hk2oKWJXO8c7B2gA0s1Y4xQhzdQTq/zwrLQGQk1e0Plqw+zd0XIp+Hd4EkdonW7VwuMYb9d7Qw9WyOlUVeP90x9ZAYpRi/DPJrrNutkrt2/5/jg6OPbqupI16k8iBdc2jNzkC8RgLRT9AUZpCLgAf4KNgFd5Mplzp6YOzUX7FboGrHVXLdHrwY7R1AoUyU37Pw3hPic5Hpn9PC7scWHFTDf4Rqo7I6vcW/nRRiIRC0Dw225IzSjiUZfIMlyKtZvOC+/Vf/FXtV7sFxuJTuHFLuKcab5OR6ldj0Olb1cWdpNeTTySWUDl7Om0rdjMRweUQz+DB9jPjkm+3xOV4lfu05HndvpTlGWstgw4vD2U4wI+/L9lQz9uQqUF7Epny6EgojITBvm0LCivwxw/8IcfKw/aLPv+Ei+migFQ7ZVLWurAXIGx/IdgADNc22yyVXrousz5SfnSMZ2rQ/R414QRmLlUkcVzqJow1gPJFoenrFuux3Nd7pWEDKmpuoH0JQwSEkC3ewuJ+0XFJEmboVZphqWKrpjEYWaV1orja75moTePtdcteHLBh0yUkpP/AKOQB7YDe2mIGYUuO89GMyCTvskV5Ae6mg/ONDKb11hvmUEc1/J6uLD/wypCOOGzJsLaaEx0xd9NBQAilzcUwf95h6S9PumytstGCOCIh8fYToCTNk+qi4oWTPxo8go1aEGKTiEy6Lf4mRD+362ika5TW1xt+mu/0N7e5fdieNRunPmf7qExN/oGL+VidiIWZmHVTGjaziOIrV32dBWE1f1MZzZsg5MHC5qnl7uFNdrvkaegcXR49uUJ7cfOQOIYp9CkwCpE4EKS6zuev/tpvTKneyGSmV78YiAQO5FxYlg1aPjf47c9g3CdTjQ8sWPMJxW7Aoq7jDRHPxfWNwKIz3FtpJL6sPKZdb7tw4AmHqSnpirJ5Topu4x70VHoqH34rZL0Bic812c6iIe+XW9PsUu2ep0egoBFVO2PfiWMPFviaUXdJi2NvrcIIqKFl9rNPSZ5PmWBNVcPMuffd+5av84mPvpmVldx14BEOJV4X51roUh/TCm0cLwd5NV23eP9YIikPYK3cD111tcjfysdO7qOd5ArCSM8vSvWoH2+A4BPLloY/PSgGLrc4k7fubdFfdoOqe/eOeFhc/uPBiog6iGgqMAQttfwiUya7TjpG4cNSIGnlGAtmxGfCF5decr4i3e7orNuP0LdowpPWBejBZ6u9J6YERkn0EXjrqt5IvZJCX8X9onjIv9N6xo+pusVmqeA6bXEnEn1gQaitXCnG2LwlMVF8KbZM94jUn0lZoYy+VkB1O6AGApyuyc2cYBI7hffYulS7nL6A9SeNBw36Fp6GXYujfNLLrIiZeFwdo/Vmzk1wJ8YnIxKweVJ5uAfn+vYkYxQcSmTXrhriw+FNvTk5feHgNJjx6TBbubV91r3T/EWSsARS1QM8XVY0VXNLM5w6uz7gqH1+iFRgQCba3mihy3J+8z01TUXoctas3dN2UHZFHOo9D0HSMzJEVtDUNkHGSfG7ROk27nEAchCyEnYRN+2mOyUbrIaTAAi097wZSJCsd7IelrKISQx4Js+sa383crWX7dp4NVAQhWy2ITvryuXzYi0tf/6oRCfRMp5/XOr9BlkZvpKILsXu6Dy+sahLX4aFbhk0AGRKMj6Qzg0LmpMjKqKLAKnKaRg7IEYGuR2Zdr8I/vQuusW8tiLJw5GDSroU5uHJHc/i5Vrd64PW15t/gFemP/Qb52tusok6Gnbq4324lS8F1CsyWlDpWDSS0H99hVP6OGydttpF6G+1APCMeWuS5MBcYRbKBtHE0V0hxrFuz2tJQOiKiMwKlec1CEgGyyNqOSKevH3eg==,iv:DMkMkrV1byfX9zXH9bvjYb92rrv07jrIxnA5AGv84n4=,tag:ROQEwu6ROSVzCVWFfcgbrQ==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBWVdzR3RucFZyNk5SRi9x
            U0NrUlhxYXRaUlVQck9NZXA4L0JodkVlaURnCkMxd3ZHUXMwQVc4cGRYZEpzTndS
            Rksrejl6VWRxUzE4UFJWTXBaajZoUUUKLS0tIEFESEdtMGVJUDhUOHBnV0s3aWZ2
            UlBjMGg4L2pCS0RpNEdBV3BvQnpITXcK5pfNeUOTM4D6u2kLS4fSDVeAC+2deRlG
            yTW8ec/HLg3/H/vRQn0/1LVQU9eVGkn9V0nSXQBvN6JRwrR6AwDLIw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXZzBQTmVEcm9xYzZBR0hv
            Z05KSWUvblEyTEpSMVlhdnpFa2JwMnNraDFzCmppOUtJQnBpNDIxV1dBaXphN2kw
            RTVTVWYySFB3QzNJOUJWY2E2Q0t2TWsKLS0tIEE5WjAvSnFLQUFLa1V4eFhWSnEx
            VlQyZTRIcVY3VVp5cFluQTg5OWh1d28KXZAiOpLOfUJ7aF7ANrzGlXYQ3zWMC3bn
            Jl9z4Ib2S7ctVCZztL0KmMRKqVZMRluXQE5tVV860wA32nLzSEsaNw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJK0o3MjJzMFQ3VkJOcytq
            SDQ3RWJQbFdwQWIrQyt0cWhKeWV1cVdXY0IwCnBxQ0ZEYjRMb25mY2ZHTlVNeVVx
            c3VCaEdCcTJzMFlJTGZHcHJZamV0Y2sKLS0tIGUvNVo4Wlh6Q3BqQ3FXT0FaUEtZ
            dDlabzhMSzR6ZGlUK2FLd1djc3czUDAK3SR88A6EjrBMlL/rCrvcEA+u75iKFP4z
            vAWtTaeUfIn43n4PowBpKQqXoz/so4bJVXr1mrfjNlgr6csn57ZxLg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:19:04Z"
    mac: ENC[AES256_GCM,data:shWPCHA2BjM5H27pfYke9+/5Jybka5HWHZy+WC/DiFX28rLDQUMc75aZxxMVIDc94rV2FVXY/fTybAaTvsx5unsZJVS5krIDG40qn/s61xHA9207/D21IdwCjEIKzuBXZuKOJvYJ9wrqO+vcvk2Zmue+4NvW69pQZppPVQUEzLI=,iv:Q4GHsvPYRX9jxeMdQlhxiUSt0fOSZ6I1Nh4QcUMnUXc=,tag:F3JQQhpfbwwMLYXfGrMOGQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBWVdzR3RucFZyNk5SRi9x
            U0NrUlhxYXRaUlVQck9NZXA4L0JodkVlaURnCkMxd3ZHUXMwQVc4cGRYZEpzTndS
            Rksrejl6VWRxUzE4UFJWTXBaajZoUUUKLS0tIEFESEdtMGVJUDhUOHBnV0s3aWZ2
            UlBjMGg4L2pCS0RpNEdBV3BvQnpITXcK5pfNeUOTM4D6u2kLS4fSDVeAC+2deRlG
            yTW8ec/HLg3/H/vRQn0/1LVQU9eVGkn9V0nSXQBvN6JRwrR6AwDLIw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXZzBQTmVEcm9xYzZBR0hv
            Z05KSWUvblEyTEpSMVlhdnpFa2JwMnNraDFzCmppOUtJQnBpNDIxV1dBaXphN2kw
            RTVTVWYySFB3QzNJOUJWY2E2Q0t2TWsKLS0tIEE5WjAvSnFLQUFLa1V4eFhWSnEx
            VlQyZTRIcVY3VVp5cFluQTg5OWh1d28KXZAiOpLOfUJ7aF7ANrzGlXYQ3zWMC3bn
            Jl9z4Ib2S7ctVCZztL0KmMRKqVZMRluXQE5tVV860wA32nLzSEsaNw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJK0o3MjJzMFQ3VkJOcytq
            SDQ3RWJQbFdwQWIrQyt0cWhKeWV1cVdXY0IwCnBxQ0ZEYjRMb25mY2ZHTlVNeVVx
            c3VCaEdCcTJzMFlJTGZHcHJZamV0Y2sKLS0tIGUvNVo4Wlh6Q3BqQ3FXT0FaUEtZ
            dDlabzhMSzR6ZGlUK2FLd1djc3czUDAK3SR88A6EjrBMlL/rCrvcEA+u75iKFP4z
            vAWtTaeUfIn43n4PowBpKQqXoz/so4bJVXr1mrfjNlgr6csn57ZxLg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:19:04Z"
    mac: ENC[AES256_GCM,data:shWPCHA2BjM5H27pfYke9+/5Jybka5HWHZy+WC/DiFX28rLDQUMc75aZxxMVIDc94rV2FVXY/fTybAaTvsx5unsZJVS5krIDG40qn/s61xHA9207/D21IdwCjEIKzuBXZuKOJvYJ9wrqO+vcvk2Zmue+4NvW69pQZppPVQUEzLI=,iv:Q4GHsvPYRX9jxeMdQlhxiUSt0fOSZ6I1Nh4QcUMnUXc=,tag:F3JQQhpfbwwMLYXfGrMOGQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBWVdzR3RucFZyNk5SRi9x
            U0NrUlhxYXRaUlVQck9NZXA4L0JodkVlaURnCkMxd3ZHUXMwQVc4cGRYZEpzTndS
            Rksrejl6VWRxUzE4UFJWTXBaajZoUUUKLS0tIEFESEdtMGVJUDhUOHBnV0s3aWZ2
            UlBjMGg4L2pCS0RpNEdBV3BvQnpITXcK5pfNeUOTM4D6u2kLS4fSDVeAC+2deRlG
            yTW8ec/HLg3/H/vRQn0/1LVQU9eVGkn9V0nSXQBvN6JRwrR6AwDLIw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXZzBQTmVEcm9xYzZBR0hv
            Z05KSWUvblEyTEpSMVlhdnpFa2JwMnNraDFzCmppOUtJQnBpNDIxV1dBaXphN2kw
            RTVTVWYySFB3QzNJOUJWY2E2Q0t2TWsKLS0tIEE5WjAvSnFLQUFLa1V4eFhWSnEx
            VlQyZTRIcVY3VVp5cFluQTg5OWh1d28KXZAiOpLOfUJ7aF7ANrzGlXYQ3zWMC3bn
            Jl9z4Ib2S7ctVCZztL0KmMRKqVZMRluXQE5tVV860wA32nLzSEsaNw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJK0o3MjJzMFQ3VkJOcytq
            SDQ3RWJQbFdwQWIrQyt0cWhKeWV1cVdXY0IwCnBxQ0ZEYjRMb25mY2ZHTlVNeVVx
            c3VCaEdCcTJzMFlJTGZHcHJZamV0Y2sKLS0tIGUvNVo4Wlh6Q3BqQ3FXT0FaUEtZ
            dDlabzhMSzR6ZGlUK2FLd1djc3czUDAK3SR88A6EjrBMlL/rCrvcEA+u75iKFP4z
            vAWtTaeUfIn43n4PowBpKQqXoz/so4bJVXr1mrfjNlgr6csn57ZxLg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:19:04Z"
    mac: ENC[AES256_GCM,data:shWPCHA2BjM5H27pfYke9+/5Jybka5HWHZy+WC/DiFX28rLDQUMc75aZxxMVIDc94rV2FVXY/fTybAaTvsx5unsZJVS5krIDG40qn/s61xHA9207/D21IdwCjEIKzuBXZuKOJvYJ9wrqO+vcvk2Zmue+4NvW69pQZppPVQUEzLI=,iv:Q4GHsvPYRX9jxeMdQlhxiUSt0fOSZ6I1Nh4QcUMnUXc=,tag:F3JQQhpfbwwMLYXfGrMOGQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBBWVdzR3RucFZyNk5SRi9x
            U0NrUlhxYXRaUlVQck9NZXA4L0JodkVlaURnCkMxd3ZHUXMwQVc4cGRYZEpzTndS
            Rksrejl6VWRxUzE4UFJWTXBaajZoUUUKLS0tIEFESEdtMGVJUDhUOHBnV0s3aWZ2
            UlBjMGg4L2pCS0RpNEdBV3BvQnpITXcK5pfNeUOTM4D6u2kLS4fSDVeAC+2deRlG
            yTW8ec/HLg3/H/vRQn0/1LVQU9eVGkn9V0nSXQBvN6JRwrR6AwDLIw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBXZzBQTmVEcm9xYzZBR0hv
            Z05KSWUvblEyTEpSMVlhdnpFa2JwMnNraDFzCmppOUtJQnBpNDIxV1dBaXphN2kw
            RTVTVWYySFB3QzNJOUJWY2E2Q0t2TWsKLS0tIEE5WjAvSnFLQUFLa1V4eFhWSnEx
            VlQyZTRIcVY3VVp5cFluQTg5OWh1d28KXZAiOpLOfUJ7aF7ANrzGlXYQ3zWMC3bn
            Jl9z4Ib2S7ctVCZztL0KmMRKqVZMRluXQE5tVV860wA32nLzSEsaNw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBJK0o3MjJzMFQ3VkJOcytq
            SDQ3RWJQbFdwQWIrQyt0cWhKeWV1cVdXY0IwCnBxQ0ZEYjRMb25mY2ZHTlVNeVVx
            c3VCaEdCcTJzMFlJTGZHcHJZamV0Y2sKLS0tIGUvNVo4Wlh6Q3BqQ3FXT0FaUEtZ
            dDlabzhMSzR6ZGlUK2FLd1djc3czUDAK3SR88A6EjrBMlL/rCrvcEA+u75iKFP4z
            vAWtTaeUfIn43n4PowBpKQqXoz/so4bJVXr1mrfjNlgr6csn57ZxLg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:19:04Z"
    mac: ENC[AES256_GCM,data:shWPCHA2BjM5H27pfYke9+/5Jybka5HWHZy+WC/DiFX28rLDQUMc75aZxxMVIDc94rV2FVXY/fTybAaTvsx5unsZJVS5krIDG40qn/s61xHA9207/D21IdwCjEIKzuBXZuKOJvYJ9wrqO+vcvk2Zmue+4NvW69pQZppPVQUEzLI=,iv:Q4GHsvPYRX9jxeMdQlhxiUSt0fOSZ6I1Nh4QcUMnUXc=,tag:F3JQQhpfbwwMLYXfGrMOGQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
