apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: 72989b2e6ddb17d7c6284099ddd3559640e37444543014cdd9ee3d300fa4c09b
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: HOME
                      value: /home/node
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.13@sha256:6026771358490d22af93dc462aa99e1c9d10fed1f6067aecd83a0c86bc8abafe
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBGZG9ZeVVCdmlMbzNNWGsw
            MWFtdGptWU83VGt6dmErNHFIS05uNGo5c2hrCnRIeUg1TnQ1aHlJeENsQ0MzMVI1
            Tm9XU2NSZmprOVo1dE44eWFMSjBKM1UKLS0tIDhTVXhVeWxuQi9qdElEaEUvY3F4
            dlBwSDZ1bmJsekpCVnduZ01BYnYrWlUKF3KLK0175mctK2c7jt7P9PMuxrWQALOT
            T5e8VepJ9LBQ4nvdjtzM140ldcFE8o3d3vDARGmsGQaImSBzITUP3g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNQWVxS3EwZEI2UE43amo4
            Sm52bXB6U1JQamFVWFNzZjZXTjhRcjBRcFd3CjRWRlJIM3pRS0tMQSs1N0dUNlAz
            TU9qNDNpNXpOSDEwRHRiZEFSS2FadkEKLS0tICtIUm9xd0pRTHBhbWxtTGdia0I4
            QktsSDM5L04xbXVqTDNQamptU0JqQlUKK4jZhzB7k4GU+GzYbc8zuXR+85Xyv4Mb
            WesOh0r8Ykv6PuBmcAerWIV048W2dbOxZtYoteIw+atQmx/W70nItQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLOW5Gc2VNK2RjMHh0cERa
            akkyZFBhdVlUSnFyVkVEcGtCcWM0d2N4RGg0Cm16Rk9wbi9tYXl0TW8yZjFoNlZj
            cWZqUCtNb3JHT1Ura0tmS2FVVzBKRncKLS0tIFVQRTFmZnVwT2pRayt1NEp3akNu
            YzloVnF1bzRHbmViRDdLNktINktzTTgKcUBpJR8i4tF0s46l7vggDYyzuPhDf866
            nCorcohZKkVD4+lcBRvF9fudpXO2zJGZ/jY+2Oaqw4owHKYO0v7IlA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-14T23:57:41Z"
    mac: ENC[AES256_GCM,data:/Qr88gmGpEYxfoP2U9j3B8EU1NnhB7DcMLDhfRNm0xnnjnSHZkc49M5PG5gqO/jwAL6VeZLwN4ZlFt6urWFLN7PjGn6xpwLqoM6n+oJzAm+CanC2AP70g5Erula+eyHztpZU4gW70vNkiB14ad6Itbk2WTgQYpDv19uvQy7HPqo=,iv:KP2yAq+SksOcqkMey1UwBV6oKb4wivEeWtYAvl8iTmg=,tag:S00DMZWFvIkXMUFxoenmJA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data: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,iv:8HW/7UUMyL5RHkV6eMpK+a7FVQNkZZX0RQLafht5+xw=,tag:BaT13ngfHD5ZAp6nR3DfxQ==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBGZG9ZeVVCdmlMbzNNWGsw
            MWFtdGptWU83VGt6dmErNHFIS05uNGo5c2hrCnRIeUg1TnQ1aHlJeENsQ0MzMVI1
            Tm9XU2NSZmprOVo1dE44eWFMSjBKM1UKLS0tIDhTVXhVeWxuQi9qdElEaEUvY3F4
            dlBwSDZ1bmJsekpCVnduZ01BYnYrWlUKF3KLK0175mctK2c7jt7P9PMuxrWQALOT
            T5e8VepJ9LBQ4nvdjtzM140ldcFE8o3d3vDARGmsGQaImSBzITUP3g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNQWVxS3EwZEI2UE43amo4
            Sm52bXB6U1JQamFVWFNzZjZXTjhRcjBRcFd3CjRWRlJIM3pRS0tMQSs1N0dUNlAz
            TU9qNDNpNXpOSDEwRHRiZEFSS2FadkEKLS0tICtIUm9xd0pRTHBhbWxtTGdia0I4
            QktsSDM5L04xbXVqTDNQamptU0JqQlUKK4jZhzB7k4GU+GzYbc8zuXR+85Xyv4Mb
            WesOh0r8Ykv6PuBmcAerWIV048W2dbOxZtYoteIw+atQmx/W70nItQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLOW5Gc2VNK2RjMHh0cERa
            akkyZFBhdVlUSnFyVkVEcGtCcWM0d2N4RGg0Cm16Rk9wbi9tYXl0TW8yZjFoNlZj
            cWZqUCtNb3JHT1Ura0tmS2FVVzBKRncKLS0tIFVQRTFmZnVwT2pRayt1NEp3akNu
            YzloVnF1bzRHbmViRDdLNktINktzTTgKcUBpJR8i4tF0s46l7vggDYyzuPhDf866
            nCorcohZKkVD4+lcBRvF9fudpXO2zJGZ/jY+2Oaqw4owHKYO0v7IlA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-14T23:57:41Z"
    mac: ENC[AES256_GCM,data:/Qr88gmGpEYxfoP2U9j3B8EU1NnhB7DcMLDhfRNm0xnnjnSHZkc49M5PG5gqO/jwAL6VeZLwN4ZlFt6urWFLN7PjGn6xpwLqoM6n+oJzAm+CanC2AP70g5Erula+eyHztpZU4gW70vNkiB14ad6Itbk2WTgQYpDv19uvQy7HPqo=,iv:KP2yAq+SksOcqkMey1UwBV6oKb4wivEeWtYAvl8iTmg=,tag:S00DMZWFvIkXMUFxoenmJA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBGZG9ZeVVCdmlMbzNNWGsw
            MWFtdGptWU83VGt6dmErNHFIS05uNGo5c2hrCnRIeUg1TnQ1aHlJeENsQ0MzMVI1
            Tm9XU2NSZmprOVo1dE44eWFMSjBKM1UKLS0tIDhTVXhVeWxuQi9qdElEaEUvY3F4
            dlBwSDZ1bmJsekpCVnduZ01BYnYrWlUKF3KLK0175mctK2c7jt7P9PMuxrWQALOT
            T5e8VepJ9LBQ4nvdjtzM140ldcFE8o3d3vDARGmsGQaImSBzITUP3g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNQWVxS3EwZEI2UE43amo4
            Sm52bXB6U1JQamFVWFNzZjZXTjhRcjBRcFd3CjRWRlJIM3pRS0tMQSs1N0dUNlAz
            TU9qNDNpNXpOSDEwRHRiZEFSS2FadkEKLS0tICtIUm9xd0pRTHBhbWxtTGdia0I4
            QktsSDM5L04xbXVqTDNQamptU0JqQlUKK4jZhzB7k4GU+GzYbc8zuXR+85Xyv4Mb
            WesOh0r8Ykv6PuBmcAerWIV048W2dbOxZtYoteIw+atQmx/W70nItQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLOW5Gc2VNK2RjMHh0cERa
            akkyZFBhdVlUSnFyVkVEcGtCcWM0d2N4RGg0Cm16Rk9wbi9tYXl0TW8yZjFoNlZj
            cWZqUCtNb3JHT1Ura0tmS2FVVzBKRncKLS0tIFVQRTFmZnVwT2pRayt1NEp3akNu
            YzloVnF1bzRHbmViRDdLNktINktzTTgKcUBpJR8i4tF0s46l7vggDYyzuPhDf866
            nCorcohZKkVD4+lcBRvF9fudpXO2zJGZ/jY+2Oaqw4owHKYO0v7IlA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-14T23:57:41Z"
    mac: ENC[AES256_GCM,data:/Qr88gmGpEYxfoP2U9j3B8EU1NnhB7DcMLDhfRNm0xnnjnSHZkc49M5PG5gqO/jwAL6VeZLwN4ZlFt6urWFLN7PjGn6xpwLqoM6n+oJzAm+CanC2AP70g5Erula+eyHztpZU4gW70vNkiB14ad6Itbk2WTgQYpDv19uvQy7HPqo=,iv:KP2yAq+SksOcqkMey1UwBV6oKb4wivEeWtYAvl8iTmg=,tag:S00DMZWFvIkXMUFxoenmJA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBGZG9ZeVVCdmlMbzNNWGsw
            MWFtdGptWU83VGt6dmErNHFIS05uNGo5c2hrCnRIeUg1TnQ1aHlJeENsQ0MzMVI1
            Tm9XU2NSZmprOVo1dE44eWFMSjBKM1UKLS0tIDhTVXhVeWxuQi9qdElEaEUvY3F4
            dlBwSDZ1bmJsekpCVnduZ01BYnYrWlUKF3KLK0175mctK2c7jt7P9PMuxrWQALOT
            T5e8VepJ9LBQ4nvdjtzM140ldcFE8o3d3vDARGmsGQaImSBzITUP3g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNQWVxS3EwZEI2UE43amo4
            Sm52bXB6U1JQamFVWFNzZjZXTjhRcjBRcFd3CjRWRlJIM3pRS0tMQSs1N0dUNlAz
            TU9qNDNpNXpOSDEwRHRiZEFSS2FadkEKLS0tICtIUm9xd0pRTHBhbWxtTGdia0I4
            QktsSDM5L04xbXVqTDNQamptU0JqQlUKK4jZhzB7k4GU+GzYbc8zuXR+85Xyv4Mb
            WesOh0r8Ykv6PuBmcAerWIV048W2dbOxZtYoteIw+atQmx/W70nItQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLOW5Gc2VNK2RjMHh0cERa
            akkyZFBhdVlUSnFyVkVEcGtCcWM0d2N4RGg0Cm16Rk9wbi9tYXl0TW8yZjFoNlZj
            cWZqUCtNb3JHT1Ura0tmS2FVVzBKRncKLS0tIFVQRTFmZnVwT2pRayt1NEp3akNu
            YzloVnF1bzRHbmViRDdLNktINktzTTgKcUBpJR8i4tF0s46l7vggDYyzuPhDf866
            nCorcohZKkVD4+lcBRvF9fudpXO2zJGZ/jY+2Oaqw4owHKYO0v7IlA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-14T23:57:41Z"
    mac: ENC[AES256_GCM,data:/Qr88gmGpEYxfoP2U9j3B8EU1NnhB7DcMLDhfRNm0xnnjnSHZkc49M5PG5gqO/jwAL6VeZLwN4ZlFt6urWFLN7PjGn6xpwLqoM6n+oJzAm+CanC2AP70g5Erula+eyHztpZU4gW70vNkiB14ad6Itbk2WTgQYpDv19uvQy7HPqo=,iv:KP2yAq+SksOcqkMey1UwBV6oKb4wivEeWtYAvl8iTmg=,tag:S00DMZWFvIkXMUFxoenmJA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBGZG9ZeVVCdmlMbzNNWGsw
            MWFtdGptWU83VGt6dmErNHFIS05uNGo5c2hrCnRIeUg1TnQ1aHlJeENsQ0MzMVI1
            Tm9XU2NSZmprOVo1dE44eWFMSjBKM1UKLS0tIDhTVXhVeWxuQi9qdElEaEUvY3F4
            dlBwSDZ1bmJsekpCVnduZ01BYnYrWlUKF3KLK0175mctK2c7jt7P9PMuxrWQALOT
            T5e8VepJ9LBQ4nvdjtzM140ldcFE8o3d3vDARGmsGQaImSBzITUP3g==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNQWVxS3EwZEI2UE43amo4
            Sm52bXB6U1JQamFVWFNzZjZXTjhRcjBRcFd3CjRWRlJIM3pRS0tMQSs1N0dUNlAz
            TU9qNDNpNXpOSDEwRHRiZEFSS2FadkEKLS0tICtIUm9xd0pRTHBhbWxtTGdia0I4
            QktsSDM5L04xbXVqTDNQamptU0JqQlUKK4jZhzB7k4GU+GzYbc8zuXR+85Xyv4Mb
            WesOh0r8Ykv6PuBmcAerWIV048W2dbOxZtYoteIw+atQmx/W70nItQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBLOW5Gc2VNK2RjMHh0cERa
            akkyZFBhdVlUSnFyVkVEcGtCcWM0d2N4RGg0Cm16Rk9wbi9tYXl0TW8yZjFoNlZj
            cWZqUCtNb3JHT1Ura0tmS2FVVzBKRncKLS0tIFVQRTFmZnVwT2pRayt1NEp3akNu
            YzloVnF1bzRHbmViRDdLNktINktzTTgKcUBpJR8i4tF0s46l7vggDYyzuPhDf866
            nCorcohZKkVD4+lcBRvF9fudpXO2zJGZ/jY+2Oaqw4owHKYO0v7IlA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-14T23:57:41Z"
    mac: ENC[AES256_GCM,data:/Qr88gmGpEYxfoP2U9j3B8EU1NnhB7DcMLDhfRNm0xnnjnSHZkc49M5PG5gqO/jwAL6VeZLwN4ZlFt6urWFLN7PjGn6xpwLqoM6n+oJzAm+CanC2AP70g5Erula+eyHztpZU4gW70vNkiB14ad6Itbk2WTgQYpDv19uvQy7HPqo=,iv:KP2yAq+SksOcqkMey1UwBV6oKb4wivEeWtYAvl8iTmg=,tag:S00DMZWFvIkXMUFxoenmJA==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
