apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: f96d5828b1f9884b482f16e7abc70d0eea18c686eabee0f096539001bcb23a91
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - node
                    - dist/index.js
                    - gateway
                    - --allow-unconfigured
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /app/extensions/matrix
                      name: hide-bundled-matrix
                    - mountPath: /home/node
                      name: main
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "true"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsPolicy: ClusterFirst
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                - command:
                    - sh
                    - -c
                    - |
                      set -e

                      PLUGIN_DIR="/home/node/.openclaw/extensions/matrix"

                      # Check if already installed with all deps (including native binary)
                      if [ -d "$PLUGIN_DIR/node_modules/@vector-im/matrix-bot-sdk" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/markdown-it" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/@matrix-org/matrix-sdk-crypto-nodejs-linux-x64-gnu" ]; then
                        echo "Matrix plugin deps already installed"
                        exit 0
                      fi

                      echo "Setting up matrix plugin in persistent volume..."

                      # Copy plugin source from bundled location (not hidden here - emptyDir only on main)
                      rm -rf "$PLUGIN_DIR"
                      mkdir -p "$PLUGIN_DIR"
                      cp -r /app/extensions/matrix/* "$PLUGIN_DIR/"

                      # Remove devDependencies (workspace ref) from package.json
                      cd "$PLUGIN_DIR"
                      sed -i '/"devDependencies"/,/}/d' package.json
                      # Remove trailing comma before closing brace if any
                      sed -i ':a;N;$!ba;s/,\n}/\n}/g' package.json

                      # Allow native module build scripts (pnpm v10+ blocks them by default)
                      # Without this, @matrix-org/matrix-sdk-crypto-nodejs postinstall won't run
                      # and the platform-specific binary won't be downloaded
                      node -e "
                        const pkg = JSON.parse(require('fs').readFileSync('package.json','utf8'));
                        pkg.pnpm = { onlyBuiltDependencies: ['@matrix-org/matrix-sdk-crypto-nodejs'] };
                        require('fs').writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "

                      echo "Installing dependencies with pnpm..."
                      pnpm install --no-frozen-lockfile 2>&1

                      echo "Matrix plugin installed successfully"
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: install-matrix-plugin
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - emptyDir: {}
                  name: hide-bundled-matrix
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5YUowbnhSRi84SnoyZDhl
            RDlIN3JFT3VDeDR3QndKVk45NzRLUkhsWUVzCkcrZ09IVmNMSER5MWpRS1U0VzI3
            VklDRzE2ZFhCYm5ycy9wdlNKb0FHT00KLS0tIEhrQXMzTDE5OGZjTTBMV1BxeGVB
            RjBwL1NBajROQ2gyUWF4ak0wVkFDTkUKXAE4qjzP1opt2+WlAumuy35/HLhKxG6T
            +V/9yJJFG1EePmQmNKKaiA4VucCyQKiprCmRf8kjK2KQz3XSlbRroA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBRL0o3Y0FCSFc3eFpueHBC
            S000TGNhSU91c3hSUmxhSWFzc2htQ0tFTHkwCjBudkJjdVBkeWprODFVSDdqUldU
            M2tPSEV6azRpejJ1YTFLL3RmMzlrRGMKLS0tIGR2cXZ5ZzVaeHVzdmtDWExyYkpB
            VkRmUnBkRVF5K3dmYjJWVTV3VlVQdTgKZDRX0IuPG64aHXfNWYt4qiZIoNil9iFO
            WoAd9G1Kd8Ay2DK29fszyqS6nyXXiyZHEOiydkpb+8q7R1TPdxiHTw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlR3BvMVg4bXpJamxTWGFL
            N2o3QW5ZL25VbndoLzJNUjdIdUFxVDJpQXdrCnpjM3loUGEzbTRIajFUUzBOOTRH
            RmRkQk1zU0s2cnBFRVd3VlFhWWlzdnMKLS0tICtsZmRCQk9RMGxvY09ZMm9mRXlH
            MWxkUm9GTldlNktVb0xLa0hjUlBCNkkKf3JsyVTiLuyu0QNoI5pr4EaIuGCQghIg
            8QOEgOOT9JHrPQL9m9MN1xaIpadlf1fvYn+mc0aae/YcQ9GlslU0yA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T03:27:34Z"
    mac: ENC[AES256_GCM,data:Li/SDMgIPXZ4MuNiIalaafzqXn2hluGeMzjPMRvun9mXdi+Pj2jWvheRMb8PqoPYejUaNjA5PQmnH50q5PSDQ8oDBhFHSmHJJBthHBq+5Lh61sJGyz/wIFpfUszGJM+z0aDCgvdxC8wjgPB+TgJHwXx2OUzKrjWr6ixAxjigRcM=,iv:p39joTk3phtGIWVMMqqePQW9den+uQZuyp6ijbJj7hs=,tag:gv7a4O7yAH7KvJKM9vK2mQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data:kdjitOxw4CGlFyU5webhxT5VjCW4J4fafOGldos1Y6L4Lt3iZSZ7PC0b9n1AmJCeZK3AhMKoDqy8pI7aiyRIl0y5/wipLue8yP5Q+Q43hoYcekEVaPpPlNtJDdpVsntKA3Rln088n/paBg82s0WL1c4SqANh9rXkDW5T+JygkfI4qMJwq5ztZo7bgrK0IS53sL/HFMDdAULQz3ffxSRdL3i+Umlc/oYQFRDEE2EEkmQJMTMJrQshg6B8g1iT4xSFpttDzltmFuF5utTKDDXG6w64WlJVKcZexEm2EjYwnDfnKnisgoc33n8+t5ALHIxJgqqDtPq636e+9AKHN9znT7/u5W2EoucNf6PxlNhBxKUJuU6Q1gBAjbU0vr4YU4n67ez0rd2rWid3w4cCIf/kAzZGipB4jRdWgZIfCc9rnyJNo/Bghq1lXZIAC5qVmh6YQ2hrPnm9ZPNdqaxE5sZt7LcMrAr3uHnJUQggHWaNW2/CKmfdvCziGnnXNWCHOj3aO9nvCQrwgAqQnNRdaqHKPiuIQVqO1A5IS0gqoccCriRU7+8VsEBySXVdlpClSid2gws8FYr2SBGXnBbOibqNzOPhJ6EKYpvumC6Z/yM4MU9SMrkU7tYvvKuUlIBQA64WQ4TcwvfSJhrNSyFBUPtanCWdaTyv3Jjn+N4Knxql+l0N+uqjPGmeLzrgcK0/oFSEMlAK7rGjMiJ3TcuRjlWc6h9Fp4Z/pAsUmyM4r6CnaxMnWJz8aP5N6YqxaIfkyjDXC0h/SapxJZx8Efvu4MW0nxl7Vh2K2fHj80XstI8h50it3CK6q2eiAqqLmtHKooQfTtaeEYChfHH7Yr7ke+fLXoLl3aeKqC57gm1kfPqgWQARLHeXPHQyeYUn0VP9TGpHDC9nYLxon6QXngGAQDeqvGWT2QWqeMj+bdhIcCzcvafciHgnQ5FJeoaU8NfYr1xDAXors4HZTX+eh4u45BOEPxmDwnip41nQ+3pBKLQXl2hvWUtKWsUBH8Mh+knuDIM8hrduat7DIkkkstTuukNZe/s1AX56seLy1ZDcfIKQqkZ6cJAESX67max2o1H3CcBhgZJXX2ceOmw5T4VNal/5zGRr7z5MBrUXiktQiESCibT79cgbiutIVWZ3s18tJP8UKyxotQYfywp6L0Ae3lUmG+m7Bb3y99YApFrgAvQoOCYAi/A4m2TQARgVqpQ4QBga2SkdL9dVMeHWN+/6RYQZhhr90CiTbpdjQk4mWCiYqvOIb4gWvBB9+3LzYAWb5NQGfBPrHgFVD7hxqz7MleehdO8QlzFDwx5M43Lp4tDWwKiPy5nX1bLlG2NKz+pk7sJkI//jIhNHh/sHqbMicYsNgczNOjSF0b33tr9g2I6QwxcK56ldcbmHlSKi8uXZ+wGp3tj/7SEzy6xyeqy3bmHJTbg/FDDT2uIThrH/8Y+lBfKiVfVHN7rg7ZeC80/ZgFI6oOiEfjXd8sILEKtN0TsAHWhqXOWSug4mPHQ6+iKGcRLRwxlopWkr3in+k3KdrPtr4HM=,iv:vsTrY1Uo2Ke1EsuUQfAUOJ6gyPy3cNyDVMfuojttDa0=,tag:KyRmZGqxIyvrbAv6/JUYdA==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5YUowbnhSRi84SnoyZDhl
            RDlIN3JFT3VDeDR3QndKVk45NzRLUkhsWUVzCkcrZ09IVmNMSER5MWpRS1U0VzI3
            VklDRzE2ZFhCYm5ycy9wdlNKb0FHT00KLS0tIEhrQXMzTDE5OGZjTTBMV1BxeGVB
            RjBwL1NBajROQ2gyUWF4ak0wVkFDTkUKXAE4qjzP1opt2+WlAumuy35/HLhKxG6T
            +V/9yJJFG1EePmQmNKKaiA4VucCyQKiprCmRf8kjK2KQz3XSlbRroA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBRL0o3Y0FCSFc3eFpueHBC
            S000TGNhSU91c3hSUmxhSWFzc2htQ0tFTHkwCjBudkJjdVBkeWprODFVSDdqUldU
            M2tPSEV6azRpejJ1YTFLL3RmMzlrRGMKLS0tIGR2cXZ5ZzVaeHVzdmtDWExyYkpB
            VkRmUnBkRVF5K3dmYjJWVTV3VlVQdTgKZDRX0IuPG64aHXfNWYt4qiZIoNil9iFO
            WoAd9G1Kd8Ay2DK29fszyqS6nyXXiyZHEOiydkpb+8q7R1TPdxiHTw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlR3BvMVg4bXpJamxTWGFL
            N2o3QW5ZL25VbndoLzJNUjdIdUFxVDJpQXdrCnpjM3loUGEzbTRIajFUUzBOOTRH
            RmRkQk1zU0s2cnBFRVd3VlFhWWlzdnMKLS0tICtsZmRCQk9RMGxvY09ZMm9mRXlH
            MWxkUm9GTldlNktVb0xLa0hjUlBCNkkKf3JsyVTiLuyu0QNoI5pr4EaIuGCQghIg
            8QOEgOOT9JHrPQL9m9MN1xaIpadlf1fvYn+mc0aae/YcQ9GlslU0yA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T03:27:34Z"
    mac: ENC[AES256_GCM,data:Li/SDMgIPXZ4MuNiIalaafzqXn2hluGeMzjPMRvun9mXdi+Pj2jWvheRMb8PqoPYejUaNjA5PQmnH50q5PSDQ8oDBhFHSmHJJBthHBq+5Lh61sJGyz/wIFpfUszGJM+z0aDCgvdxC8wjgPB+TgJHwXx2OUzKrjWr6ixAxjigRcM=,iv:p39joTk3phtGIWVMMqqePQW9den+uQZuyp6ijbJj7hs=,tag:gv7a4O7yAH7KvJKM9vK2mQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5YUowbnhSRi84SnoyZDhl
            RDlIN3JFT3VDeDR3QndKVk45NzRLUkhsWUVzCkcrZ09IVmNMSER5MWpRS1U0VzI3
            VklDRzE2ZFhCYm5ycy9wdlNKb0FHT00KLS0tIEhrQXMzTDE5OGZjTTBMV1BxeGVB
            RjBwL1NBajROQ2gyUWF4ak0wVkFDTkUKXAE4qjzP1opt2+WlAumuy35/HLhKxG6T
            +V/9yJJFG1EePmQmNKKaiA4VucCyQKiprCmRf8kjK2KQz3XSlbRroA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBRL0o3Y0FCSFc3eFpueHBC
            S000TGNhSU91c3hSUmxhSWFzc2htQ0tFTHkwCjBudkJjdVBkeWprODFVSDdqUldU
            M2tPSEV6azRpejJ1YTFLL3RmMzlrRGMKLS0tIGR2cXZ5ZzVaeHVzdmtDWExyYkpB
            VkRmUnBkRVF5K3dmYjJWVTV3VlVQdTgKZDRX0IuPG64aHXfNWYt4qiZIoNil9iFO
            WoAd9G1Kd8Ay2DK29fszyqS6nyXXiyZHEOiydkpb+8q7R1TPdxiHTw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlR3BvMVg4bXpJamxTWGFL
            N2o3QW5ZL25VbndoLzJNUjdIdUFxVDJpQXdrCnpjM3loUGEzbTRIajFUUzBOOTRH
            RmRkQk1zU0s2cnBFRVd3VlFhWWlzdnMKLS0tICtsZmRCQk9RMGxvY09ZMm9mRXlH
            MWxkUm9GTldlNktVb0xLa0hjUlBCNkkKf3JsyVTiLuyu0QNoI5pr4EaIuGCQghIg
            8QOEgOOT9JHrPQL9m9MN1xaIpadlf1fvYn+mc0aae/YcQ9GlslU0yA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T03:27:34Z"
    mac: ENC[AES256_GCM,data:Li/SDMgIPXZ4MuNiIalaafzqXn2hluGeMzjPMRvun9mXdi+Pj2jWvheRMb8PqoPYejUaNjA5PQmnH50q5PSDQ8oDBhFHSmHJJBthHBq+5Lh61sJGyz/wIFpfUszGJM+z0aDCgvdxC8wjgPB+TgJHwXx2OUzKrjWr6ixAxjigRcM=,iv:p39joTk3phtGIWVMMqqePQW9den+uQZuyp6ijbJj7hs=,tag:gv7a4O7yAH7KvJKM9vK2mQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5YUowbnhSRi84SnoyZDhl
            RDlIN3JFT3VDeDR3QndKVk45NzRLUkhsWUVzCkcrZ09IVmNMSER5MWpRS1U0VzI3
            VklDRzE2ZFhCYm5ycy9wdlNKb0FHT00KLS0tIEhrQXMzTDE5OGZjTTBMV1BxeGVB
            RjBwL1NBajROQ2gyUWF4ak0wVkFDTkUKXAE4qjzP1opt2+WlAumuy35/HLhKxG6T
            +V/9yJJFG1EePmQmNKKaiA4VucCyQKiprCmRf8kjK2KQz3XSlbRroA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBRL0o3Y0FCSFc3eFpueHBC
            S000TGNhSU91c3hSUmxhSWFzc2htQ0tFTHkwCjBudkJjdVBkeWprODFVSDdqUldU
            M2tPSEV6azRpejJ1YTFLL3RmMzlrRGMKLS0tIGR2cXZ5ZzVaeHVzdmtDWExyYkpB
            VkRmUnBkRVF5K3dmYjJWVTV3VlVQdTgKZDRX0IuPG64aHXfNWYt4qiZIoNil9iFO
            WoAd9G1Kd8Ay2DK29fszyqS6nyXXiyZHEOiydkpb+8q7R1TPdxiHTw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlR3BvMVg4bXpJamxTWGFL
            N2o3QW5ZL25VbndoLzJNUjdIdUFxVDJpQXdrCnpjM3loUGEzbTRIajFUUzBOOTRH
            RmRkQk1zU0s2cnBFRVd3VlFhWWlzdnMKLS0tICtsZmRCQk9RMGxvY09ZMm9mRXlH
            MWxkUm9GTldlNktVb0xLa0hjUlBCNkkKf3JsyVTiLuyu0QNoI5pr4EaIuGCQghIg
            8QOEgOOT9JHrPQL9m9MN1xaIpadlf1fvYn+mc0aae/YcQ9GlslU0yA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T03:27:34Z"
    mac: ENC[AES256_GCM,data:Li/SDMgIPXZ4MuNiIalaafzqXn2hluGeMzjPMRvun9mXdi+Pj2jWvheRMb8PqoPYejUaNjA5PQmnH50q5PSDQ8oDBhFHSmHJJBthHBq+5Lh61sJGyz/wIFpfUszGJM+z0aDCgvdxC8wjgPB+TgJHwXx2OUzKrjWr6ixAxjigRcM=,iv:p39joTk3phtGIWVMMqqePQW9den+uQZuyp6ijbJj7hs=,tag:gv7a4O7yAH7KvJKM9vK2mQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA5YUowbnhSRi84SnoyZDhl
            RDlIN3JFT3VDeDR3QndKVk45NzRLUkhsWUVzCkcrZ09IVmNMSER5MWpRS1U0VzI3
            VklDRzE2ZFhCYm5ycy9wdlNKb0FHT00KLS0tIEhrQXMzTDE5OGZjTTBMV1BxeGVB
            RjBwL1NBajROQ2gyUWF4ak0wVkFDTkUKXAE4qjzP1opt2+WlAumuy35/HLhKxG6T
            +V/9yJJFG1EePmQmNKKaiA4VucCyQKiprCmRf8kjK2KQz3XSlbRroA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBRL0o3Y0FCSFc3eFpueHBC
            S000TGNhSU91c3hSUmxhSWFzc2htQ0tFTHkwCjBudkJjdVBkeWprODFVSDdqUldU
            M2tPSEV6azRpejJ1YTFLL3RmMzlrRGMKLS0tIGR2cXZ5ZzVaeHVzdmtDWExyYkpB
            VkRmUnBkRVF5K3dmYjJWVTV3VlVQdTgKZDRX0IuPG64aHXfNWYt4qiZIoNil9iFO
            WoAd9G1Kd8Ay2DK29fszyqS6nyXXiyZHEOiydkpb+8q7R1TPdxiHTw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlR3BvMVg4bXpJamxTWGFL
            N2o3QW5ZL25VbndoLzJNUjdIdUFxVDJpQXdrCnpjM3loUGEzbTRIajFUUzBOOTRH
            RmRkQk1zU0s2cnBFRVd3VlFhWWlzdnMKLS0tICtsZmRCQk9RMGxvY09ZMm9mRXlH
            MWxkUm9GTldlNktVb0xLa0hjUlBCNkkKf3JsyVTiLuyu0QNoI5pr4EaIuGCQghIg
            8QOEgOOT9JHrPQL9m9MN1xaIpadlf1fvYn+mc0aae/YcQ9GlslU0yA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T03:27:34Z"
    mac: ENC[AES256_GCM,data:Li/SDMgIPXZ4MuNiIalaafzqXn2hluGeMzjPMRvun9mXdi+Pj2jWvheRMb8PqoPYejUaNjA5PQmnH50q5PSDQ8oDBhFHSmHJJBthHBq+5Lh61sJGyz/wIFpfUszGJM+z0aDCgvdxC8wjgPB+TgJHwXx2OUzKrjWr6ixAxjigRcM=,iv:p39joTk3phtGIWVMMqqePQW9den+uQZuyp6ijbJj7hs=,tag:gv7a4O7yAH7KvJKM9vK2mQ==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
