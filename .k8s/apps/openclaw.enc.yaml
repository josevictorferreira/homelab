apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: cf24116b6eb179dfb0659b25f1cdee87edec773ad6fe12b93ec4f69a2decd31d
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - sh
                    - -c
                    - |
                      echo "Installing matrix plugin deps into extension dir..."
                      cd /app/extensions/matrix
                      # Strip workspace: protocol deps that npm can't handle, using node for valid JSON
                      node -e "
                        const fs = require('fs');
                        const pkg = JSON.parse(fs.readFileSync('package.json', 'utf8'));
                        delete pkg.devDependencies;
                        fs.writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "
                      npm install --omit=dev --no-package-lock --legacy-peer-deps 2>&1 || echo "WARN: npm install in extension dir failed"
                      echo "Ensuring matrix plugin is enabled in config..."
                      cd /app
                      node -e "
                        const fs = require('fs');
                        const cfgPath = '/home/node/.openclaw/openclaw.json';
                        const cfg = JSON.parse(fs.readFileSync(cfgPath, 'utf8'));
                        if (!cfg.plugins) cfg.plugins = {};
                        if (!cfg.plugins.entries) cfg.plugins.entries = {};
                        if (!cfg.plugins.entries.matrix) cfg.plugins.entries.matrix = {};
                        cfg.plugins.entries.matrix.enabled = true;
                        if (!cfg.plugins.allow) cfg.plugins.allow = [];
                        if (!cfg.plugins.allow.includes('matrix')) cfg.plugins.allow.push('matrix');
                        fs.writeFileSync(cfgPath, JSON.stringify(cfg, null, 2));
                        console.log('Config updated: matrix plugin enabled');
                      "
                      echo "Starting gateway..."
                      exec node dist/index.js gateway run --allow-unconfigured
                  env:
                    - name: GEMINI_API_KEY
                      valueFrom:
                        secretKeyRef:
                            key: GEMINI_API_KEY
                            name: openclaw-secrets
                    - name: HOME
                      value: /home/node
                    - name: XDG_CONFIG_HOME
                      value: /home/node/.config
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:2026.2.13@sha256:6026771358490d22af93dc462aa99e1c9d10fed1f6067aecd83a0c86bc8abafe
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                    - mountPath: /home/node/shared
                      name: shared-storage
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "false"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsConfig:
                nameservers:
                    - 10.43.0.10
                    - 100.100.100.100
                options:
                    - name: ndots
                      value: "5"
                searches:
                    - apps.svc.cluster.local
                    - svc.cluster.local
                    - cluster.local
            dnsPolicy: None
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json && rm -rf /home/node/.openclaw/extensions /home/node/.config/openclaw/extensions
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: shared-storage
                  persistentVolumeClaim:
                    claimName: cephfs-shared-storage-root
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNbS9nYytFMnQxQ05URkxx
            d0NKcm8ydFRTVU5MTGxwS2J6Q2dLVStUc204CnJ6Uld1V1A2NENxdGJ4L1pYSlhh
            S09iZnpQV2YxOExwKzZEK0h4QVlGUXcKLS0tIFFNVjQ4dlI0ZEJTYUZrS3h5ejB0
            aFRvVjhGUjlZTHRrY3luSGRlS3Nod0EKbHmFwWfkrdZHsX2oDrg0MeV7C98txTVW
            IJO9AnNDGbxyUb7NXuHzfw01eaKlJGxUCQGRH8+QCaoNUvTwbDbvCQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0SHA0czNNNkZqRElWTXhq
            VFBaNTVGRWJZd211WHQyUHpUeEhkSEFtOVVjClJjT3VwU0pRWWR5Qm9WVEpuS3JY
            SEt0c2ZOalZPdlo4M1FLTUFTYlRpOVkKLS0tIGhhY2plQmRLMHl3andiaVlvamVa
            YlBEd3IyYUJBSnd1VlNFZHk2WnMvaTQK0h9/jjr0T1QYBFb8er8Bwj3a5xYDuTSU
            T3sA3YFMtZ1GkQYxlIyTVvHgUyt66N5tf1qjB4wZQyx+KRJSwgArwQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoQ3U2aUxpWTh6WmI0QkJ1
            ai9JeWp6dlMwREVtR0pxZk9RUTdHZjQ1ZGo0CmVGM21NTDRhdTA0VjFoQllSZzNS
            RjBSbUgyR1JzYUtDMVR2UHlxUm1iTFUKLS0tIEVVV1kvL3lXOTlmNDFHTVBMT1J3
            Sy9ra2lZTHFEOUtsejhBaE5TdTdkY00KIX+aFOmrkmjm+l3DpztBccrirXiMUOZX
            5aIpjxBXPJr9ZEFoIVLXmoYEN6jqMDhTEPGT045BJVIlBclW+XuAhw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:10:47Z"
    mac: ENC[AES256_GCM,data:nBeCYHmjbDZxRuKXurW5h/ed2l5n0A6YhAaX6WY512iH4JuhW6saR/4ZqWuGYT0nN70Zkj3yURAO/6cU5cHhd4D1iUBySp9k9gJtaNcVkJINLcfAxq1g73Nnu/5v63BFHr1qNFcTsRlDmM/SQ+gPl2KnZIt42ZQschBCEbfB9EY=,iv:+XtrfmwtSaihuMWC6Qi901j0J+CfOxUoWZWAIspgCL4=,tag:3w2r4jh6xkB7N5SAklah/A==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data: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,iv:6jFpLpcI3FYsOzGDIhbQ4ub7iiOUTgCcozvsS7SycuQ=,tag:yKqFGf7Scm1X8oK9nFZhxQ==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNbS9nYytFMnQxQ05URkxx
            d0NKcm8ydFRTVU5MTGxwS2J6Q2dLVStUc204CnJ6Uld1V1A2NENxdGJ4L1pYSlhh
            S09iZnpQV2YxOExwKzZEK0h4QVlGUXcKLS0tIFFNVjQ4dlI0ZEJTYUZrS3h5ejB0
            aFRvVjhGUjlZTHRrY3luSGRlS3Nod0EKbHmFwWfkrdZHsX2oDrg0MeV7C98txTVW
            IJO9AnNDGbxyUb7NXuHzfw01eaKlJGxUCQGRH8+QCaoNUvTwbDbvCQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0SHA0czNNNkZqRElWTXhq
            VFBaNTVGRWJZd211WHQyUHpUeEhkSEFtOVVjClJjT3VwU0pRWWR5Qm9WVEpuS3JY
            SEt0c2ZOalZPdlo4M1FLTUFTYlRpOVkKLS0tIGhhY2plQmRLMHl3andiaVlvamVa
            YlBEd3IyYUJBSnd1VlNFZHk2WnMvaTQK0h9/jjr0T1QYBFb8er8Bwj3a5xYDuTSU
            T3sA3YFMtZ1GkQYxlIyTVvHgUyt66N5tf1qjB4wZQyx+KRJSwgArwQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoQ3U2aUxpWTh6WmI0QkJ1
            ai9JeWp6dlMwREVtR0pxZk9RUTdHZjQ1ZGo0CmVGM21NTDRhdTA0VjFoQllSZzNS
            RjBSbUgyR1JzYUtDMVR2UHlxUm1iTFUKLS0tIEVVV1kvL3lXOTlmNDFHTVBMT1J3
            Sy9ra2lZTHFEOUtsejhBaE5TdTdkY00KIX+aFOmrkmjm+l3DpztBccrirXiMUOZX
            5aIpjxBXPJr9ZEFoIVLXmoYEN6jqMDhTEPGT045BJVIlBclW+XuAhw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:10:47Z"
    mac: ENC[AES256_GCM,data:nBeCYHmjbDZxRuKXurW5h/ed2l5n0A6YhAaX6WY512iH4JuhW6saR/4ZqWuGYT0nN70Zkj3yURAO/6cU5cHhd4D1iUBySp9k9gJtaNcVkJINLcfAxq1g73Nnu/5v63BFHr1qNFcTsRlDmM/SQ+gPl2KnZIt42ZQschBCEbfB9EY=,iv:+XtrfmwtSaihuMWC6Qi901j0J+CfOxUoWZWAIspgCL4=,tag:3w2r4jh6xkB7N5SAklah/A==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNbS9nYytFMnQxQ05URkxx
            d0NKcm8ydFRTVU5MTGxwS2J6Q2dLVStUc204CnJ6Uld1V1A2NENxdGJ4L1pYSlhh
            S09iZnpQV2YxOExwKzZEK0h4QVlGUXcKLS0tIFFNVjQ4dlI0ZEJTYUZrS3h5ejB0
            aFRvVjhGUjlZTHRrY3luSGRlS3Nod0EKbHmFwWfkrdZHsX2oDrg0MeV7C98txTVW
            IJO9AnNDGbxyUb7NXuHzfw01eaKlJGxUCQGRH8+QCaoNUvTwbDbvCQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0SHA0czNNNkZqRElWTXhq
            VFBaNTVGRWJZd211WHQyUHpUeEhkSEFtOVVjClJjT3VwU0pRWWR5Qm9WVEpuS3JY
            SEt0c2ZOalZPdlo4M1FLTUFTYlRpOVkKLS0tIGhhY2plQmRLMHl3andiaVlvamVa
            YlBEd3IyYUJBSnd1VlNFZHk2WnMvaTQK0h9/jjr0T1QYBFb8er8Bwj3a5xYDuTSU
            T3sA3YFMtZ1GkQYxlIyTVvHgUyt66N5tf1qjB4wZQyx+KRJSwgArwQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoQ3U2aUxpWTh6WmI0QkJ1
            ai9JeWp6dlMwREVtR0pxZk9RUTdHZjQ1ZGo0CmVGM21NTDRhdTA0VjFoQllSZzNS
            RjBSbUgyR1JzYUtDMVR2UHlxUm1iTFUKLS0tIEVVV1kvL3lXOTlmNDFHTVBMT1J3
            Sy9ra2lZTHFEOUtsejhBaE5TdTdkY00KIX+aFOmrkmjm+l3DpztBccrirXiMUOZX
            5aIpjxBXPJr9ZEFoIVLXmoYEN6jqMDhTEPGT045BJVIlBclW+XuAhw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:10:47Z"
    mac: ENC[AES256_GCM,data:nBeCYHmjbDZxRuKXurW5h/ed2l5n0A6YhAaX6WY512iH4JuhW6saR/4ZqWuGYT0nN70Zkj3yURAO/6cU5cHhd4D1iUBySp9k9gJtaNcVkJINLcfAxq1g73Nnu/5v63BFHr1qNFcTsRlDmM/SQ+gPl2KnZIt42ZQschBCEbfB9EY=,iv:+XtrfmwtSaihuMWC6Qi901j0J+CfOxUoWZWAIspgCL4=,tag:3w2r4jh6xkB7N5SAklah/A==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNbS9nYytFMnQxQ05URkxx
            d0NKcm8ydFRTVU5MTGxwS2J6Q2dLVStUc204CnJ6Uld1V1A2NENxdGJ4L1pYSlhh
            S09iZnpQV2YxOExwKzZEK0h4QVlGUXcKLS0tIFFNVjQ4dlI0ZEJTYUZrS3h5ejB0
            aFRvVjhGUjlZTHRrY3luSGRlS3Nod0EKbHmFwWfkrdZHsX2oDrg0MeV7C98txTVW
            IJO9AnNDGbxyUb7NXuHzfw01eaKlJGxUCQGRH8+QCaoNUvTwbDbvCQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0SHA0czNNNkZqRElWTXhq
            VFBaNTVGRWJZd211WHQyUHpUeEhkSEFtOVVjClJjT3VwU0pRWWR5Qm9WVEpuS3JY
            SEt0c2ZOalZPdlo4M1FLTUFTYlRpOVkKLS0tIGhhY2plQmRLMHl3andiaVlvamVa
            YlBEd3IyYUJBSnd1VlNFZHk2WnMvaTQK0h9/jjr0T1QYBFb8er8Bwj3a5xYDuTSU
            T3sA3YFMtZ1GkQYxlIyTVvHgUyt66N5tf1qjB4wZQyx+KRJSwgArwQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoQ3U2aUxpWTh6WmI0QkJ1
            ai9JeWp6dlMwREVtR0pxZk9RUTdHZjQ1ZGo0CmVGM21NTDRhdTA0VjFoQllSZzNS
            RjBSbUgyR1JzYUtDMVR2UHlxUm1iTFUKLS0tIEVVV1kvL3lXOTlmNDFHTVBMT1J3
            Sy9ra2lZTHFEOUtsejhBaE5TdTdkY00KIX+aFOmrkmjm+l3DpztBccrirXiMUOZX
            5aIpjxBXPJr9ZEFoIVLXmoYEN6jqMDhTEPGT045BJVIlBclW+XuAhw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:10:47Z"
    mac: ENC[AES256_GCM,data:nBeCYHmjbDZxRuKXurW5h/ed2l5n0A6YhAaX6WY512iH4JuhW6saR/4ZqWuGYT0nN70Zkj3yURAO/6cU5cHhd4D1iUBySp9k9gJtaNcVkJINLcfAxq1g73Nnu/5v63BFHr1qNFcTsRlDmM/SQ+gPl2KnZIt42ZQschBCEbfB9EY=,iv:+XtrfmwtSaihuMWC6Qi901j0J+CfOxUoWZWAIspgCL4=,tag:3w2r4jh6xkB7N5SAklah/A==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBNbS9nYytFMnQxQ05URkxx
            d0NKcm8ydFRTVU5MTGxwS2J6Q2dLVStUc204CnJ6Uld1V1A2NENxdGJ4L1pYSlhh
            S09iZnpQV2YxOExwKzZEK0h4QVlGUXcKLS0tIFFNVjQ4dlI0ZEJTYUZrS3h5ejB0
            aFRvVjhGUjlZTHRrY3luSGRlS3Nod0EKbHmFwWfkrdZHsX2oDrg0MeV7C98txTVW
            IJO9AnNDGbxyUb7NXuHzfw01eaKlJGxUCQGRH8+QCaoNUvTwbDbvCQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSB0SHA0czNNNkZqRElWTXhq
            VFBaNTVGRWJZd211WHQyUHpUeEhkSEFtOVVjClJjT3VwU0pRWWR5Qm9WVEpuS3JY
            SEt0c2ZOalZPdlo4M1FLTUFTYlRpOVkKLS0tIGhhY2plQmRLMHl3andiaVlvamVa
            YlBEd3IyYUJBSnd1VlNFZHk2WnMvaTQK0h9/jjr0T1QYBFb8er8Bwj3a5xYDuTSU
            T3sA3YFMtZ1GkQYxlIyTVvHgUyt66N5tf1qjB4wZQyx+KRJSwgArwQ==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBoQ3U2aUxpWTh6WmI0QkJ1
            ai9JeWp6dlMwREVtR0pxZk9RUTdHZjQ1ZGo0CmVGM21NTDRhdTA0VjFoQllSZzNS
            RjBSbUgyR1JzYUtDMVR2UHlxUm1iTFUKLS0tIEVVV1kvL3lXOTlmNDFHTVBMT1J3
            Sy9ra2lZTHFEOUtsejhBaE5TdTdkY00KIX+aFOmrkmjm+l3DpztBccrirXiMUOZX
            5aIpjxBXPJr9ZEFoIVLXmoYEN6jqMDhTEPGT045BJVIlBclW+XuAhw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-15T01:10:47Z"
    mac: ENC[AES256_GCM,data:nBeCYHmjbDZxRuKXurW5h/ed2l5n0A6YhAaX6WY512iH4JuhW6saR/4ZqWuGYT0nN70Zkj3yURAO/6cU5cHhd4D1iUBySp9k9gJtaNcVkJINLcfAxq1g73Nnu/5v63BFHr1qNFcTsRlDmM/SQ+gPl2KnZIt42ZQschBCEbfB9EY=,iv:+XtrfmwtSaihuMWC6Qi901j0J+CfOxUoWZWAIspgCL4=,tag:3w2r4jh6xkB7N5SAklah/A==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
