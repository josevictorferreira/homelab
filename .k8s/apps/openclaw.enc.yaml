apiVersion: apps/v1
kind: Deployment
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    replicas: 1
    revisionHistoryLimit: 3
    selector:
        matchLabels:
            app.kubernetes.io/controller: main
            app.kubernetes.io/instance: openclaw
            app.kubernetes.io/name: openclaw
    strategy:
        type: Recreate
    template:
        metadata:
            annotations:
                checksum/configMaps: e3b108132ada1617c4bfcfca646e1a95d9b318b66c064dfa324f825570c2a676
            labels:
                app.kubernetes.io/controller: main
                app.kubernetes.io/instance: openclaw
                app.kubernetes.io/name: openclaw
        spec:
            automountServiceAccountToken: true
            containers:
                - command:
                    - node
                    - dist/index.js
                    - gateway
                    - --allow-unconfigured
                  envFrom:
                    - secretRef:
                        name: openclaw-secrets
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: main
                  ports:
                    - containerPort: 18789
                      name: http
                      protocol: TCP
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /app/extensions/matrix
                      name: hide-bundled-matrix
                    - mountPath: /home/node
                      name: main
                - env:
                    - name: TS_ACCEPT_DNS
                      value: "true"
                    - name: TS_AUTHKEY
                      valueFrom:
                        secretKeyRef:
                            key: TS_AUTHKEY
                            name: openclaw-secrets
                    - name: TS_AUTH_ONCE
                      value: "true"
                    - name: TS_HOSTNAME
                      value: openclaw
                    - name: TS_KUBE_SECRET
                      value: ""
                    - name: TS_STATE_DIR
                      value: /var/lib/tailscale
                    - name: TS_USERSPACE
                      value: "false"
                  image: tailscale/tailscale:latest
                  name: tailscale
                  securityContext:
                    capabilities:
                        add:
                            - NET_ADMIN
                            - NET_RAW
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /dev/net/tun
                      name: dev-tun
                    - mountPath: /home/node
                      name: main
                    - mountPath: /var/lib/tailscale
                      name: tailscale-state
            dnsPolicy: ClusterFirst
            enableServiceLinks: false
            hostIPC: false
            hostNetwork: false
            hostPID: false
            initContainers:
                - command:
                    - sh
                    - -c
                    - mkdir -p /home/node/.openclaw && cp /config/openclaw.json /home/node/.openclaw/openclaw.json
                  image: busybox:latest
                  name: copy-config
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
                - command:
                    - sh
                    - -c
                    - |
                      set -e

                      PLUGIN_DIR="/home/node/.openclaw/extensions/matrix"

                      # Check if already installed with all deps (including native binary)
                      if [ -d "$PLUGIN_DIR/node_modules/@vector-im/matrix-bot-sdk" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/markdown-it" ] && \
                         [ -d "$PLUGIN_DIR/node_modules/@matrix-org/matrix-sdk-crypto-nodejs-linux-x64-gnu" ]; then
                        echo "Matrix plugin deps already installed"
                        exit 0
                      fi

                      echo "Setting up matrix plugin in persistent volume..."

                      # Copy plugin source from bundled location (not hidden here - emptyDir only on main)
                      rm -rf "$PLUGIN_DIR"
                      mkdir -p "$PLUGIN_DIR"
                      cp -r /app/extensions/matrix/* "$PLUGIN_DIR/"

                      # Remove devDependencies (workspace ref) from package.json
                      cd "$PLUGIN_DIR"
                      sed -i '/"devDependencies"/,/}/d' package.json
                      # Remove trailing comma before closing brace if any
                      sed -i ':a;N;$!ba;s/,\n}/\n}/g' package.json

                      # Allow native module build scripts (pnpm v10+ blocks them by default)
                      # Without this, @matrix-org/matrix-sdk-crypto-nodejs postinstall won't run
                      # and the platform-specific binary won't be downloaded
                      node -e "
                        const pkg = JSON.parse(require('fs').readFileSync('package.json','utf8'));
                        pkg.pnpm = { onlyBuiltDependencies: ['@matrix-org/matrix-sdk-crypto-nodejs'] };
                        require('fs').writeFileSync('package.json', JSON.stringify(pkg, null, 2));
                      "

                      echo "Installing dependencies with pnpm..."
                      pnpm install --no-frozen-lockfile 2>&1

                      echo "Matrix plugin installed successfully"
                  image: ghcr.io/openclaw/openclaw:latest@sha256:a02b8193cc9d985dce3479eb1986a326f1e28253275b1c43491ac7923d6167e5
                  imagePullPolicy: IfNotPresent
                  name: install-matrix-plugin
                  securityContext:
                    runAsGroup: 0
                    runAsUser: 0
                  volumeMounts:
                    - mountPath: /config/openclaw.json
                      name: config
                      readOnly: true
                      subPath: openclaw.json
                    - mountPath: /home/node
                      name: main
            serviceAccountName: default
            volumes:
                - configMap:
                    items:
                        - key: openclaw.json
                          path: openclaw.json
                    name: openclaw
                  name: config
                - hostPath:
                    path: /dev/net/tun
                  name: dev-tun
                - emptyDir: {}
                  name: hide-bundled-matrix
                - name: main
                  persistentVolumeClaim:
                    claimName: openclaw-main
                - name: tailscale-state
                  persistentVolumeClaim:
                    claimName: openclaw-tailscale-state
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYdytJVk9EL3kzTTgzd280
            bkZacXdvaUZIRGdxU05rbzR5MDVad080QlNRCjR0S3VlT3phT1N2eSs2eWVKR01Z
            QllrYTVmdUxUY3RwdUdKTDNMeUdVSjAKLS0tIG05VDZ5OEtxeVBHV0k1UnpPMTRJ
            NERsRDA5QzNHSS9RODdwTWhIWFJWQVEKsOm/iWwRHBD7XH6S8g8Ww3FYH2KVvRT8
            6dTAy0jY8zfdJu+lqg59h4lIO4B/DF8SIAQKy0lExvELwonG8ACUyA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlbFRZYWJibGQ5VEZFSlFH
            cC81NVpacHc5YURlcXcrdEh6VTRycHQ1dlRNCkk0RmdZaWtENmZPQkIya3BOa0g0
            L0NDaXRraGRDeVJ0Nml6cnNzMml2cVkKLS0tIHF1TSs3K0hXSUVPeVJVMFBhUG9m
            aGYvYjY2TVdJZW1vZUR2eGFtR0Q3SVEKBnO1UWHe0N7T18rsuLoRB1ZNhrhrjpER
            WrbecvfpcBesj3+oX6zgMhYvtkG7Q+ax9xaDP/tl4aXKZW9aPfMHdw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmV3pCRmR6dVNNaFNTaEZX
            V1I4Q24rYmY3dkVLZDRCNVhqajdET25MZ1Z3Cjk5ckZtSnRuZmRIek84N1dqYkdJ
            YlRvdGdwVTlWRjFSSnkySW5EOTZxVEUKLS0tIG9xWXBJWTMySnZLUDdOWC9LT01z
            Q3FOYTFUR3dHVFl3WlM2c25xOUtUNE0KIDJrUDRQkS5pXwt7dFctNnNowukw0Qf2
            Zss7k8ZMzF1ES3KkM3EChfZEif8LOc4VqImzB/Nc152hFaXi6fRmpQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:52:39Z"
    mac: ENC[AES256_GCM,data:EU5XsBlj8Bw3KaZ0+CbGiY9n34u6Ndvg6OjE+jv5/6l2NszvubIkfJVbUFCG5RCZVkdJeMaP3dgKA4RdvAkuU+lXG66gA13d75xOtc/eniz11TcBYV8+mkTdOr6uscBvKR/qiwws1ZUFPmveSLTy2fqK2BLLHJ3s6BHevBYNQ9U=,iv:IvvIbGi4I6YqvF/cUldCBnH1YytVvSOhcUUPnXpsp3E=,tag:cef6/TeQQqNpZzjXwWoOPg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
data:
    openclaw.json: ENC[AES256_GCM,data:nhsS0/KlrTJ3CAa25DXg8817OkdEyXIEGExm9KTO53VQEpgsc6JuO0A6r75NwyiCIraDHlMe+8Le77BnD89095ilubwTziOpPqj1cR2oJdyWVAxnHgCgejpOHaINGlW7pgEqCnuPHMYPWmgcJYx8R6bSv52aYnA4UJ5ymWkWfxqXoMl5WOgLWCfaLBNAJMI5sh7qJ3gqKZAT6SJqwx418Qgre4BPOg56Duz+Aba6hgb6cdK58JT1Qb41PH/tL4eUK6+kV6sebL2NvFIr1vL3r9YlFfcIAMW39iAgTR7lL8KuaNpnZH2JsCiQob8I4tRH3iLzn9zOBj1j9HUQV9uVXzjBWmgF3Pu/e+DzkCoQzPY0Uq7AA4nP2HBxBjuo/acjxe0WChzMsGGDIwIApuwO7p4wES0OE2TSnapprDmBNtCTj/6xYiIy/Vk8Z5DFBeaF8/sYjM6SsbZ75UwsVdz07yv2Okw1AevNMCnwn3gWeUmxO8PCzB2fk3d4qzhMSs+aBBd3u0oKJ6cQulwkplu12rsDFkTjrtMWKfoxHOLSW9MOdOT0LR+QxBnxIX9ng9mhBwaZ0VZMmz0MM2DnBrEUWA9/iHEoJ49b4zNWPiTHTrEr6vV4KzkkVPr0a24OdvhfZI6iX88HjrZjtrMn6STYJRZ5TBU0lAdYgpZp7e2TusNfjVwMAe7v18z04J6UDfRggWmxLt+tOcEzF7kbHfwnTPF05tIu9N4U/Mh8sR/NpL5xy9QY0C/FHG7lnpuvBkZxoBzy5PPUWg47wRSvnGFQ4QpcIGlQVSP2/SV/gS6El4HVZpq3o36RvVyTtwxH7zuCkH4VyFf4wpddQtLrCBjRweY4JFhtGFF3ApAG/Y3AT9yAXGF4olc3y4MkpVlggUxs3KDV3xJk3Lxpj4uhVbMQWlm6hJ/N7Eei1JiZ5VLqc4rt06o9N6BHEKncHfe8xJ76Hhw7K4i5cxWTu1MAbu8dQN31avUQLghHk+mstYbVxiaqhHkzNDPS2QvtUe5p6SCQPggB+qp9PzjL+1gbuBbJoQJ4O+lGSBXeu9EoskLuzQWttDzgNP1iXA+L7a8jprW5hnpKMLsuJVgza5nPAcb9QwCbGmkJgK9DdSFrcPcpKDO2apRmZsv1ysYcS+htgLmJ6MprBTLYnV54p8QY7IIviss1ClmBkXj8mzzIymgSFWqxDrbvYSo5acMkGgPuSWceqj2L9PEl66ueCtW01rqjPsGN5vDK1H3dnm3tSlv75V1AUKV7qT5P+CzYGsGyafnRfu4YVCVswA5+SM7uJnuUN+NirhaqV0vZpOtenmemBxBGNMZy6N4Gz/FHcHdxHIgXKeLeXMMiMSqJM0ba94uGvVQ5+bvhZE2dy5i4di/nly0pS1n7tc2rIYcLazHz85hCWF6gk7A47z2JZWpeH45wQ8asxoWXLe8FayrIqiCfvuIkCrV2xML1caqJwL9zfjS0hSMVVeE/F8drOBL+Y+G6eDfdKABAlCsk7JF7OyX+AbbCpFmNmoIZJKC+fW0szPvYyCA=,iv:alWVHcz/QN10W3vxBVC1cFGaJCVafznZvZ9/aEOdLjs=,tag:b7GCSPTb6nGHOy7R6X4OZw==,type:str]
kind: ConfigMap
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYdytJVk9EL3kzTTgzd280
            bkZacXdvaUZIRGdxU05rbzR5MDVad080QlNRCjR0S3VlT3phT1N2eSs2eWVKR01Z
            QllrYTVmdUxUY3RwdUdKTDNMeUdVSjAKLS0tIG05VDZ5OEtxeVBHV0k1UnpPMTRJ
            NERsRDA5QzNHSS9RODdwTWhIWFJWQVEKsOm/iWwRHBD7XH6S8g8Ww3FYH2KVvRT8
            6dTAy0jY8zfdJu+lqg59h4lIO4B/DF8SIAQKy0lExvELwonG8ACUyA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlbFRZYWJibGQ5VEZFSlFH
            cC81NVpacHc5YURlcXcrdEh6VTRycHQ1dlRNCkk0RmdZaWtENmZPQkIya3BOa0g0
            L0NDaXRraGRDeVJ0Nml6cnNzMml2cVkKLS0tIHF1TSs3K0hXSUVPeVJVMFBhUG9m
            aGYvYjY2TVdJZW1vZUR2eGFtR0Q3SVEKBnO1UWHe0N7T18rsuLoRB1ZNhrhrjpER
            WrbecvfpcBesj3+oX6zgMhYvtkG7Q+ax9xaDP/tl4aXKZW9aPfMHdw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmV3pCRmR6dVNNaFNTaEZX
            V1I4Q24rYmY3dkVLZDRCNVhqajdET25MZ1Z3Cjk5ckZtSnRuZmRIek84N1dqYkdJ
            YlRvdGdwVTlWRjFSSnkySW5EOTZxVEUKLS0tIG9xWXBJWTMySnZLUDdOWC9LT01z
            Q3FOYTFUR3dHVFl3WlM2c25xOUtUNE0KIDJrUDRQkS5pXwt7dFctNnNowukw0Qf2
            Zss7k8ZMzF1ES3KkM3EChfZEif8LOc4VqImzB/Nc152hFaXi6fRmpQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:52:39Z"
    mac: ENC[AES256_GCM,data:EU5XsBlj8Bw3KaZ0+CbGiY9n34u6Ndvg6OjE+jv5/6l2NszvubIkfJVbUFCG5RCZVkdJeMaP3dgKA4RdvAkuU+lXG66gA13d75xOtc/eniz11TcBYV8+mkTdOr6uscBvKR/qiwws1ZUFPmveSLTy2fqK2BLLHJ3s6BHevBYNQ9U=,iv:IvvIbGi4I6YqvF/cUldCBnH1YytVvSOhcUUPnXpsp3E=,tag:cef6/TeQQqNpZzjXwWoOPg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-main
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 10Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYdytJVk9EL3kzTTgzd280
            bkZacXdvaUZIRGdxU05rbzR5MDVad080QlNRCjR0S3VlT3phT1N2eSs2eWVKR01Z
            QllrYTVmdUxUY3RwdUdKTDNMeUdVSjAKLS0tIG05VDZ5OEtxeVBHV0k1UnpPMTRJ
            NERsRDA5QzNHSS9RODdwTWhIWFJWQVEKsOm/iWwRHBD7XH6S8g8Ww3FYH2KVvRT8
            6dTAy0jY8zfdJu+lqg59h4lIO4B/DF8SIAQKy0lExvELwonG8ACUyA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlbFRZYWJibGQ5VEZFSlFH
            cC81NVpacHc5YURlcXcrdEh6VTRycHQ1dlRNCkk0RmdZaWtENmZPQkIya3BOa0g0
            L0NDaXRraGRDeVJ0Nml6cnNzMml2cVkKLS0tIHF1TSs3K0hXSUVPeVJVMFBhUG9m
            aGYvYjY2TVdJZW1vZUR2eGFtR0Q3SVEKBnO1UWHe0N7T18rsuLoRB1ZNhrhrjpER
            WrbecvfpcBesj3+oX6zgMhYvtkG7Q+ax9xaDP/tl4aXKZW9aPfMHdw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmV3pCRmR6dVNNaFNTaEZX
            V1I4Q24rYmY3dkVLZDRCNVhqajdET25MZ1Z3Cjk5ckZtSnRuZmRIek84N1dqYkdJ
            YlRvdGdwVTlWRjFSSnkySW5EOTZxVEUKLS0tIG9xWXBJWTMySnZLUDdOWC9LT01z
            Q3FOYTFUR3dHVFl3WlM2c25xOUtUNE0KIDJrUDRQkS5pXwt7dFctNnNowukw0Qf2
            Zss7k8ZMzF1ES3KkM3EChfZEif8LOc4VqImzB/Nc152hFaXi6fRmpQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:52:39Z"
    mac: ENC[AES256_GCM,data:EU5XsBlj8Bw3KaZ0+CbGiY9n34u6Ndvg6OjE+jv5/6l2NszvubIkfJVbUFCG5RCZVkdJeMaP3dgKA4RdvAkuU+lXG66gA13d75xOtc/eniz11TcBYV8+mkTdOr6uscBvKR/qiwws1ZUFPmveSLTy2fqK2BLLHJ3s6BHevBYNQ9U=,iv:IvvIbGi4I6YqvF/cUldCBnH1YytVvSOhcUUPnXpsp3E=,tag:cef6/TeQQqNpZzjXwWoOPg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw-tailscale-state
    namespace: apps
spec:
    accessModes:
        - ReadWriteOnce
    resources:
        requests:
            storage: 1Gi
    storageClassName: rook-ceph-block
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYdytJVk9EL3kzTTgzd280
            bkZacXdvaUZIRGdxU05rbzR5MDVad080QlNRCjR0S3VlT3phT1N2eSs2eWVKR01Z
            QllrYTVmdUxUY3RwdUdKTDNMeUdVSjAKLS0tIG05VDZ5OEtxeVBHV0k1UnpPMTRJ
            NERsRDA5QzNHSS9RODdwTWhIWFJWQVEKsOm/iWwRHBD7XH6S8g8Ww3FYH2KVvRT8
            6dTAy0jY8zfdJu+lqg59h4lIO4B/DF8SIAQKy0lExvELwonG8ACUyA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlbFRZYWJibGQ5VEZFSlFH
            cC81NVpacHc5YURlcXcrdEh6VTRycHQ1dlRNCkk0RmdZaWtENmZPQkIya3BOa0g0
            L0NDaXRraGRDeVJ0Nml6cnNzMml2cVkKLS0tIHF1TSs3K0hXSUVPeVJVMFBhUG9m
            aGYvYjY2TVdJZW1vZUR2eGFtR0Q3SVEKBnO1UWHe0N7T18rsuLoRB1ZNhrhrjpER
            WrbecvfpcBesj3+oX6zgMhYvtkG7Q+ax9xaDP/tl4aXKZW9aPfMHdw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmV3pCRmR6dVNNaFNTaEZX
            V1I4Q24rYmY3dkVLZDRCNVhqajdET25MZ1Z3Cjk5ckZtSnRuZmRIek84N1dqYkdJ
            YlRvdGdwVTlWRjFSSnkySW5EOTZxVEUKLS0tIG9xWXBJWTMySnZLUDdOWC9LT01z
            Q3FOYTFUR3dHVFl3WlM2c25xOUtUNE0KIDJrUDRQkS5pXwt7dFctNnNowukw0Qf2
            Zss7k8ZMzF1ES3KkM3EChfZEif8LOc4VqImzB/Nc152hFaXi6fRmpQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:52:39Z"
    mac: ENC[AES256_GCM,data:EU5XsBlj8Bw3KaZ0+CbGiY9n34u6Ndvg6OjE+jv5/6l2NszvubIkfJVbUFCG5RCZVkdJeMaP3dgKA4RdvAkuU+lXG66gA13d75xOtc/eniz11TcBYV8+mkTdOr6uscBvKR/qiwws1ZUFPmveSLTy2fqK2BLLHJ3s6BHevBYNQ9U=,iv:IvvIbGi4I6YqvF/cUldCBnH1YytVvSOhcUUPnXpsp3E=,tag:cef6/TeQQqNpZzjXwWoOPg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
---
apiVersion: v1
kind: Service
metadata:
    annotations:
        kubenix/k8s-version: "1.32"
        kubenix/project-name: ze-homelab
        lbipam.cilium.io/ips: 10.10.10.140
        lbipam.cilium.io/sharing-key: openclaw
    labels:
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: openclaw
        app.kubernetes.io/service: openclaw
        helm.sh/chart: app-template-4.2.0
        kubenix/module-name: release
        kubenix/module-version: 1.0.0
    name: openclaw
    namespace: apps
spec:
    ports:
        - name: http
          port: 18789
          protocol: TCP
          targetPort: 18789
    selector:
        app.kubernetes.io/controller: main
        app.kubernetes.io/instance: openclaw
        app.kubernetes.io/name: openclaw
    type: LoadBalancer
sops:
    age:
        - recipient: age16yrhmz8fytj7j9ns80zl40zjcdfd3pdxh48ld7ys7veea774udtqfn9jyx
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBYdytJVk9EL3kzTTgzd280
            bkZacXdvaUZIRGdxU05rbzR5MDVad080QlNRCjR0S3VlT3phT1N2eSs2eWVKR01Z
            QllrYTVmdUxUY3RwdUdKTDNMeUdVSjAKLS0tIG05VDZ5OEtxeVBHV0k1UnpPMTRJ
            NERsRDA5QzNHSS9RODdwTWhIWFJWQVEKsOm/iWwRHBD7XH6S8g8Ww3FYH2KVvRT8
            6dTAy0jY8zfdJu+lqg59h4lIO4B/DF8SIAQKy0lExvELwonG8ACUyA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1jx9qu5p0ycvymrl2gykd9z3w8x8n67jxnatxs49j7qzspjr6asqqf8u35h
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlbFRZYWJibGQ5VEZFSlFH
            cC81NVpacHc5YURlcXcrdEh6VTRycHQ1dlRNCkk0RmdZaWtENmZPQkIya3BOa0g0
            L0NDaXRraGRDeVJ0Nml6cnNzMml2cVkKLS0tIHF1TSs3K0hXSUVPeVJVMFBhUG9m
            aGYvYjY2TVdJZW1vZUR2eGFtR0Q3SVEKBnO1UWHe0N7T18rsuLoRB1ZNhrhrjpER
            WrbecvfpcBesj3+oX6zgMhYvtkG7Q+ax9xaDP/tl4aXKZW9aPfMHdw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1myzhwq67gu5zrfk8fvs0p7mh5fk67d20ltwqf9325ya83lm06ytsyax3j2
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmV3pCRmR6dVNNaFNTaEZX
            V1I4Q24rYmY3dkVLZDRCNVhqajdET25MZ1Z3Cjk5ckZtSnRuZmRIek84N1dqYkdJ
            YlRvdGdwVTlWRjFSSnkySW5EOTZxVEUKLS0tIG9xWXBJWTMySnZLUDdOWC9LT01z
            Q3FOYTFUR3dHVFl3WlM2c25xOUtUNE0KIDJrUDRQkS5pXwt7dFctNnNowukw0Qf2
            Zss7k8ZMzF1ES3KkM3EChfZEif8LOc4VqImzB/Nc152hFaXi6fRmpQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-13T13:52:39Z"
    mac: ENC[AES256_GCM,data:EU5XsBlj8Bw3KaZ0+CbGiY9n34u6Ndvg6OjE+jv5/6l2NszvubIkfJVbUFCG5RCZVkdJeMaP3dgKA4RdvAkuU+lXG66gA13d75xOtc/eniz11TcBYV8+mkTdOr6uscBvKR/qiwws1ZUFPmveSLTy2fqK2BLLHJ3s6BHevBYNQ9U=,iv:IvvIbGi4I6YqvF/cUldCBnH1YytVvSOhcUUPnXpsp3E=,tag:cef6/TeQQqNpZzjXwWoOPg==,type:str]
    encrypted_regex: ^(data|stringData)$
    version: 3.10.2
